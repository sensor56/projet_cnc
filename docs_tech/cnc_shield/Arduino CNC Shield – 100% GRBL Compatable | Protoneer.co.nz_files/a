(function($){var restore_dims=function(){$('img[data-recalc-dims]').each(function recalc(){var $this=$(this);if(this.complete){if($this.data('lazy-src')&&$this.attr('src')!==$this.data('lazy-src')){$this.load(recalc);return;}
var width=this.width,height=this.height;if(width&&width>0&&height&&height>0){$this.attr({width:width,height:height});reset_for_retina(this);}}
else{$this.load(recalc);}});},reset_for_retina=function(img){$(img).removeAttr('data-recalc-dims').removeAttr('scale');};$(document).ready(restore_dims);if('on'in $.fn){$(document.body).on('post-load',restore_dims);}else{$(document).delegate('body','post-load',restore_dims);}})(jQuery);
;/*global jQuery */
/*jshint multistr:true browser:true */
/*!
* FitVids 1.0.3
*
* Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com
* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
* Released under the WTFPL license - http://sam.zoy.org/wtfpl/
*
* Date: Thu Sept 01 18:00:00 2011 -0500
*/
function epdofitvids(e)
{
    "use strict";e.fn.fitVidsEP=function(t){var n={customSelector:null};if(!document.getElementById("fit-vids-style")){var r=document.createElement("div"),i=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0],s="&shy;<style>.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>";r.className="fit-vids-style";r.id="fit-vids-style";r.style.display="none";r.innerHTML=s;i.parentNode.insertBefore(r,i)}if(t){e.extend(n,t)}return this.each(function(){var t=epresponsiveselector;if(n.customSelector){t.push(n.customSelector)}var r=e(this).find(t.join(","));r=r.not("object object");r.each(function(){var t=e(this);if(this.tagName.toLowerCase()==="embed"&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length){return}var n=this.tagName.toLowerCase()==="object"||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height(),r=!isNaN(parseInt(t.attr("width"),10))?parseInt(t.attr("width"),10):t.width(),i=n/r;if(!t.attr("id")){var s="fitvid"+Math.floor(Math.random()*999999);t.attr("id",s)}t.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",i*100+"%");t.removeAttr("height").removeAttr("width")})})};
    
    e(document).ready(function(){e("body").fitVidsEP();});
    return true;
}
var ephasjq = typeof window.jQuery != "undefined" && epdofitvids(window.jQuery);
if (!ephasjq)
{
    document.write("<script src='" + eppathtoscripts + "jqueryfit.min.js'>\x3C/script>");
}

;WPGroHo=jQuery.extend({my_hash:'',data:{},renderers:{},syncProfileData:function(hash,id){if(!WPGroHo.data[hash]){WPGroHo.data[hash]={};jQuery('div.grofile-hash-map-'+hash+' span').each(function(){WPGroHo.data[hash][this.className]=jQuery(this).text();});}
WPGroHo.appendProfileData(WPGroHo.data[hash],hash,id);},appendProfileData:function(data,hash,id){for(var key in data){if(jQuery.isFunction(WPGroHo.renderers[key])){return WPGroHo.renderers[key](data[key],hash,id,key);}
jQuery('#'+id).find('h4').after(jQuery('<p class="grav-extra '+key+'" />').html(data[key]));}}},WPGroHo);jQuery(document).ready(function(){Gravatar.profile_cb=function(h,d){WPGroHo.syncProfileData(h,d);};Gravatar.my_hash=WPGroHo.my_hash;Gravatar.init('body','#wpadminbar');});
;var addComment={moveForm:function(a,b,c,d){var e,f=this,g=f.I(a),h=f.I(c),i=f.I("cancel-comment-reply-link"),j=f.I("comment_parent"),k=f.I("comment_post_ID");if(g&&h&&i&&j){f.respondId=c,d=d||!1,f.I("wp-temp-form-div")||(e=document.createElement("div"),e.id="wp-temp-form-div",e.style.display="none",h.parentNode.insertBefore(e,h)),g.parentNode.insertBefore(h,g.nextSibling),k&&d&&(k.value=d),j.value=b,i.style.display="",i.onclick=function(){var a=addComment,b=a.I("wp-temp-form-div"),c=a.I(a.respondId);if(b&&c)return a.I("comment_parent").value="0",b.parentNode.insertBefore(c,b),b.parentNode.removeChild(b),this.style.display="none",this.onclick=null,!1};try{f.I("comment").focus()}catch(l){}return!1}},I:function(a){return document.getElementById(a)}};
;/** HoverIntent minified */
(function(e){e.fn.hoverIntent=function(t,n,r){var i={sensitivity:7,interval:100,timeout:0};i=e.extend(i,n?{over:t,out:n}:t);var s,o,u,a;var f=function(e){s=e.pageX;o=e.pageY};var l=function(t,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if(Math.abs(u-s)+Math.abs(a-o)<i.sensitivity){e(n).unbind("mousemove",f);n.hoverIntent_s=1;return i.over.apply(n,[t])}else{u=s;a=o;n.hoverIntent_t=setTimeout(function(){l(t,n)},i.interval)}};var c=function(e,t){t.hoverIntent_t=clearTimeout(t.hoverIntent_t);t.hoverIntent_s=0;return i.out.apply(t,[e])};var h=function(t){var n=jQuery.extend({},t);var r=this;if(r.hoverIntent_t){r.hoverIntent_t=clearTimeout(r.hoverIntent_t)}if(t.type=="mouseenter"){u=n.pageX;a=n.pageY;e(r).bind("mousemove",f);if(r.hoverIntent_s!=1){r.hoverIntent_t=setTimeout(function(){l(n,r)},i.interval)}}else{e(r).unbind("mousemove",f);if(r.hoverIntent_s==1){r.hoverIntent_t=setTimeout(function(){c(n,r)},i.timeout)}}};if(r)return e(this).on({mouseenter:h,mouseleave:h},r);else return this.bind("mouseenter",h).bind("mouseleave",h)}})(jQuery);
/** Superfish Minified */
(function(e){e.fn.superfish=function(t){var n=e.fn.superfish,r=n.c,i=e('<span class="'+r.arrowClass+'"> &#187;</span>'),s=function(t){var n=e(this),r=u(n);clearTimeout(r.sfTimer);n.showSuperfishUl().siblings().hideSuperfishUl()},o=function(t){var r=e(this),i=u(r),o=n.op;var a=function(){o.retainPath=e.inArray(r[0],o.$path)>-1;r.hideSuperfishUl();if(o.$path.length&&r.parents("li."+o.hoverClass).length<1){o.onIdle.call();e.proxy(s,o.$path,t)()}};if(t.type!=="mouseleave"&&t.type!=="focusout"){a()}else{clearTimeout(i.sfTimer);i.sfTimer=setTimeout(a,o.delay)}},u=function(t){if(t.hasClass(r.menuClass)){e.error("Superfish requires you to update to a version of hoverIntent that supports event-delegation, such as this one: https://github.com/joeldbirch/onHoverIntent")}var i=t.closest("."+r.menuClass)[0];n.op=n.o[i.serial];return i},a=function(t){var r="li:has(ul)";if(!n.op.useClick){if(e.fn.hoverIntent&&!n.op.disableHI){t.hoverIntent(s,o,r)}else{t.on("mouseenter",r,s).on("mouseleave",r,o)}}t.on("focusin","li",s).on("focusout","li",o).on("click","a",l).on("touchstart","a",f)},f=function(){var t=e(this);if(!t.next("ul").is(":visible")){e(this).data("follow",false)}},l=function(t){var r=e(this),i=r.next("ul"),u=r.data("follow")===false?false:true;if(i.length&&(n.op.useClick||!u)){t.preventDefault();if(!i.is(":visible")){e.proxy(s,r.parent(),t)()}else if(n.op.useClick&&u){e.proxy(o,r.parent(),t)()}}},c=function(t,n){if(n.autoArrows){t.children("a").each(function(){h(e(this))})}},h=function(e){e.addClass(r.anchorClass).append(i.clone())};return this.addClass(r.menuClass).each(function(){var i=this.serial=n.o.length;var s=e.extend({},n.defaults,t);var o=e(this);var u=o.find("li:has(ul)");s.$path=o.find("li."+s.pathClass).slice(0,s.pathLevels).each(function(){e(this).addClass(s.hoverClass+" "+r.bcClass).filter("li:has(ul)").removeClass(s.pathClass)});n.o[i]=n.op=s;c(u,s);a(o);u.not("."+r.bcClass).hideSuperfishUl();s.onInit.call(this)})};var t=e.fn.superfish;t.o=[];t.op={};t.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator"};t.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},animationOut:{opacity:"hide"},speed:"normal",speedOut:"fast",autoArrows:true,disableHI:false,useClick:false,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){},onIdle:function(){}};e.fn.extend({hideSuperfishUl:function(){var n=t.op,r=this,i=n.retainPath===true?n.$path:"";n.retainPath=false;var s=e("li."+n.hoverClass,this).add(this).not(i).find(">ul").stop().animate(n.animationOut,n.speedOut,function(){s=e(this);s.parent().removeClass(n.hoverClass);n.onHide.call(s);if(t.op.useClick){r.children("a").data("follow",false)}});return this},showSuperfishUl:function(){var e=t.op,n=this,r=this.find(">ul:hidden");r.parent("li").addClass(e.hoverClass);e.onBeforeShow.call(r);r.stop().animate(e.animation,e.speed,function(){e.onShow.call(r);n.children("a").data("follow",true)});return this}})})(jQuery);
/** Supersubs Minified */
(function(e){e.fn.supersubs=function(t){var n=e.extend({},e.fn.supersubs.defaults,t);return this.each(function(){var t=e(this);var r=e.meta?e.extend({},n,t.data()):n;var i=e('<li id="menu-fontsize">&#8212;</li>').css({padding:0,position:"absolute",top:"-999em",width:"auto"}).appendTo(t).width();e("#menu-fontsize").remove();$ULs=t.find("ul");$ULs.each(function(t){var n=$ULs.eq(t);var s=n.children();var u=s.children("a");var a=s.css("white-space","nowrap").css("float");var f=n.add(s).add(u).css({"float":"none",width:"auto"}).end().end()[0].clientWidth/i;f+=r.extraWidth;if(f>r.maxWidth){f=r.maxWidth}else if(f<r.minWidth){f=r.minWidth}f+="em";n.css("width",f);s.css({"float":a,width:"100%","white-space":"normal"}).each(function(){var t=e(">ul",this);var n=t.css("left")!==undefined?"left":"right";t.css(n,f)})})})};e.fn.supersubs.defaults={minWidth:9,maxWidth:25,extraWidth:0}})(jQuery);
;(function($){function infinityMenu(){$('ul.sf-menu, .menu ul').supersubs({minWidth:16,maxWidth:27,extraWidth:1}).superfish({delay:100,speed:'fast',animation:{opacity:'show',height:'show'},dropShadows:false});$('ul.sf-menu li:last-child a, .menu ul li:last-child a').css('border-bottom','none');}
function infinityEqualHeightCols(){var contentHeight=$('#content').height();var sidebarHeight=$('#sidebar').height();var highestCol=Math.max(contentHeight,sidebarHeight);if(contentHeight<highestCol){$('#content').height(highestCol);}}
$(document).ready(function(){infinityMenu();});$(window).load(function(){infinityEqualHeightCols();});})(jQuery);;(function(root,factory){if(typeof exports=='object')module.exports=factory()
else if(typeof define=='function'&&define.amd)define(factory)
else root.Spinner=factory()}
(this,function(){"use strict";var prefixes=['webkit','Moz','ms','O'],animations={},useCssAnimations
function createEl(tag,prop){var el=document.createElement(tag||'div'),n
for(n in prop)el[n]=prop[n]
return el}
function ins(parent){for(var i=1,n=arguments.length;i<n;i++)
parent.appendChild(arguments[i])
return parent}
var sheet=(function(){var el=createEl('style',{type:'text/css'})
ins(document.getElementsByTagName('head')[0],el)
return el.sheet||el.styleSheet}())
function addAnimation(alpha,trail,i,lines){var name=['opacity',trail,~~(alpha*100),i,lines].join('-'),start=0.01+i/lines*100,z=Math.max(1-(1-alpha)/trail*(100-start),alpha),prefix=useCssAnimations.substring(0,useCssAnimations.indexOf('Animation')).toLowerCase(),pre=prefix&&'-'+prefix+'-'||''
if(!animations[name]){sheet.insertRule('@'+pre+'keyframes '+name+'{'+'0%{opacity:'+z+'}'+
start+'%{opacity:'+alpha+'}'+
(start+0.01)+'%{opacity:1}'+
(start+trail)%100+'%{opacity:'+alpha+'}'+'100%{opacity:'+z+'}'+'}',sheet.cssRules.length)
animations[name]=1}
return name}
function vendor(el,prop){var s=el.style,pp,i
if(s[prop]!==undefined)return prop
prop=prop.charAt(0).toUpperCase()+prop.slice(1)
for(i=0;i<prefixes.length;i++){pp=prefixes[i]+prop
if(s[pp]!==undefined)return pp}}
function css(el,prop){for(var n in prop)
el.style[vendor(el,n)||n]=prop[n]
return el}
function merge(obj){for(var i=1;i<arguments.length;i++){var def=arguments[i]
for(var n in def)
if(obj[n]===undefined)obj[n]=def[n]}
return obj}
function pos(el){var o={x:el.offsetLeft,y:el.offsetTop}
while((el=el.offsetParent))
o.x+=el.offsetLeft,o.y+=el.offsetTop
return o}
var defaults={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:'#000',direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:'spinner',top:'auto',left:'auto',position:'relative'}
function Spinner(o){if(typeof this=='undefined')return new Spinner(o)
this.opts=merge(o||{},Spinner.defaults,defaults)}
Spinner.defaults={}
merge(Spinner.prototype,{spin:function(target){this.stop()
var self=this,o=self.opts,el=self.el=css(createEl(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),mid=o.radius+o.length+o.width,ep,tp
if(target){target.insertBefore(el,target.firstChild||null)
tp=pos(target)
ep=pos(el)
css(el,{left:(o.left=='auto'?tp.x-ep.x+(target.offsetWidth>>1):parseInt(o.left,10)+mid)+'px',top:(o.top=='auto'?tp.y-ep.y+(target.offsetHeight>>1):parseInt(o.top,10)+mid)+'px'})}
el.setAttribute('role','progressbar')
self.lines(el,self.opts)
if(!useCssAnimations){var i=0,start=(o.lines-1)*(1-o.direction)/2,alpha,fps=o.fps,f=fps/o.speed,ostep=(1-o.opacity)/(f*o.trail/100),astep=f/o.lines;(function anim(){i++;for(var j=0;j<o.lines;j++){alpha=Math.max(1-(i+(o.lines-j)*astep)%f*ostep,o.opacity)
self.opacity(el,j*o.direction+start,alpha,o)}
self.timeout=self.el&&setTimeout(anim,~~(1000/fps))})()}
return self},stop:function(){var el=this.el
if(el){clearTimeout(this.timeout)
if(el.parentNode)el.parentNode.removeChild(el)
this.el=undefined}
return this},lines:function(el,o){var i=0,start=(o.lines-1)*(1-o.direction)/2,seg
function fill(color,shadow){return css(createEl(),{position:'absolute',width:(o.length+o.width)+'px',height:o.width+'px',background:color,boxShadow:shadow,transformOrigin:'left',transform:'rotate('+~~(360/o.lines*i+o.rotate)+'deg) translate('+o.radius+'px'+',0)',borderRadius:(o.corners*o.width>>1)+'px'})}
for(;i<o.lines;i++){seg=css(createEl(),{position:'absolute',top:1+~(o.width/2)+'px',transform:o.hwaccel?'translate3d(0,0,0)':'',opacity:o.opacity,animation:useCssAnimations&&addAnimation(o.opacity,o.trail,start+i*o.direction,o.lines)+' '+1/o.speed+'s linear infinite'})
if(o.shadow)ins(seg,css(fill('#000','0 0 4px '+'#000'),{top:2+'px'}))
ins(el,ins(seg,fill(o.color,'0 0 1px rgba(0,0,0,.1)')))}
return el},opacity:function(el,i,val){if(i<el.childNodes.length)el.childNodes[i].style.opacity=val}})
function initVML(){function vml(tag,attr){return createEl('<'+tag+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',attr)}
sheet.addRule('.spin-vml','behavior:url(#default#VML)')
Spinner.prototype.lines=function(el,o){var r=o.length+o.width,s=2*r
function grp(){return css(vml('group',{coordsize:s+' '+s,coordorigin:-r+' '+-r}),{width:s,height:s})}
var margin=-(o.width+o.length)*2+'px',g=css(grp(),{position:'absolute',top:margin,left:margin}),i
function seg(i,dx,filter){ins(g,ins(css(grp(),{rotation:360/o.lines*i+'deg',left:~~dx}),ins(css(vml('roundrect',{arcsize:o.corners}),{width:r,height:o.width,left:o.radius,top:-o.width>>1,filter:filter}),vml('fill',{color:o.color,opacity:o.opacity}),vml('stroke',{opacity:0}))))}
if(o.shadow)
for(i=1;i<=o.lines;i++)
seg(i,-2,'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)')
for(i=1;i<=o.lines;i++)seg(i)
return ins(el,g)}
Spinner.prototype.opacity=function(el,i,val,o){var c=el.firstChild
o=o.shadow&&o.lines||0
if(c&&i+o<c.childNodes.length){c=c.childNodes[i+o];c=c&&c.firstChild;c=c&&c.firstChild
if(c)c.opacity=val}}}
var probe=css(createEl('group'),{behavior:'url(#default#VML)'})
if(!vendor(probe,'transform')&&probe.adj)initVML()
else useCssAnimations=vendor(probe,'animation')
return Spinner}));;(function(factory){if(typeof exports=='object'){factory(require('jquery'),require('spin'))}
else if(typeof define=='function'&&define.amd){define(['jquery','spin'],factory)}
else{if(!window.Spinner)throw new Error('Spin.js not present')
factory(window.jQuery,window.Spinner)}}(function($,Spinner){$.fn.spin=function(opts,color){return this.each(function(){var $this=$(this),data=$this.data();if(data.spinner){data.spinner.stop();delete data.spinner;}
if(opts!==false){opts=$.extend({color:color||$this.css('color')},$.fn.spin.presets[opts]||opts)
if(typeof opts.right!=='undefined'&&typeof opts.length!=='undefined'&&typeof opts.width!=='undefined'&&typeof opts.radius!=='undefined'){var pad=$this.css('padding-left');pad=(typeof pad==='undefined')?0:parseInt(pad,10);opts.left=$this.outerWidth()-(2*(opts.length+opts.width+opts.radius))-pad-opts.right;delete opts.right;}
data.spinner=new Spinner(opts).spin(this)}})}
$.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}));(function($){$.fn.spin.presets.wp={trail:60,speed:1.3};$.fn.spin.presets.small=$.extend({lines:8,length:2,width:2,radius:3},$.fn.spin.presets.wp);$.fn.spin.presets.medium=$.extend({lines:8,length:4,width:3,radius:5},$.fn.spin.presets.wp);$.fn.spin.presets.large=$.extend({lines:10,length:6,width:4,radius:7},$.fn.spin.presets.wp);$.fn.spin.presets['small-left']=$.extend({left:5},$.fn.spin.presets.small);$.fn.spin.presets['small-right']=$.extend({right:5},$.fn.spin.presets.small);$.fn.spin.presets['medium-left']=$.extend({left:5},$.fn.spin.presets.medium);$.fn.spin.presets['medium-right']=$.extend({right:5},$.fn.spin.presets.medium);$.fn.spin.presets['large-left']=$.extend({left:5},$.fn.spin.presets.large);$.fn.spin.presets['large-right']=$.extend({right:5},$.fn.spin.presets.large);})(jQuery);;jQuery(document).ready(function($){var overlay,comments,gallery,container,nextButton,previousButton,info,transitionBegin,caption,resizeTimeout,photo_info,close_hint,commentInterval,lastSelectedSlide,screenPadding=110,originalOverflow=$('body').css('overflow'),originalHOverflow=$('html').css('overflow'),proportion=85,last_known_location_hash='',imageMeta,titleAndDescription,commentForm,leftColWrapper;if(window.innerWidth<=760){screenPadding=Math.round((window.innerWidth/760)*110);if(screenPadding<40&&(('ontouchstart'in window)||window.DocumentTouch&&document instanceof DocumentTouch)){screenPadding=0;}}
var keyListener=function(e){switch(e.which){case 38:e.preventDefault();container.scrollTop(container.scrollTop()-100);break;case 40:e.preventDefault();container.scrollTop(container.scrollTop()+100);break;case 39:e.preventDefault();gallery.jp_carousel('clearCommentTextAreaValue');gallery.jp_carousel('next');break;case 37:case 8:e.preventDefault();gallery.jp_carousel('clearCommentTextAreaValue');gallery.jp_carousel('previous');break;case 27:e.preventDefault();gallery.jp_carousel('clearCommentTextAreaValue');container.jp_carousel('close');break;default:break;}};var resizeListener=function(){clearTimeout(resizeTimeout);resizeTimeout=setTimeout(function(){gallery.jp_carousel('slides').jp_carousel('fitSlide',true);gallery.jp_carousel('updateSlidePositions',true);gallery.jp_carousel('fitMeta',true);},200);};var prepareGallery=function(){if(!overlay){overlay=$('<div></div>').addClass('jp-carousel-overlay').css({'position':'absolute','top':0,'right':0,'bottom':0,'left':0});var buttons='<a class="jp-carousel-commentlink" href="#">'+jetpackCarouselStrings.comment+'</a>';if(1===Number(jetpackCarouselStrings.is_logged_in)){}
buttons=$('<div class="jp-carousel-buttons">'+buttons+'</div>');caption=$('<h2></h2>');photo_info=$('<div class="jp-carousel-photo-info"></div>').append(caption);imageMeta=$('<div></div>').addClass('jp-carousel-image-meta').css({'float':'right','margin-top':'20px','width':'250px'});imageMeta.append(buttons).append('<ul class=\'jp-carousel-image-exif\' style=\'display:none;\'></ul>').append('<a class=\'jp-carousel-image-download\' style=\'display:none;\'></a>').append('<div class=\'jp-carousel-image-map\' style=\'display:none;\'></div>');titleAndDescription=$('<div></div>').addClass('jp-carousel-titleanddesc').css({'width':'100%','margin-top':imageMeta.css('margin-top')});var commentFormMarkup='<div id="jp-carousel-comment-form-container">';if(jetpackCarouselStrings.local_comments_commenting_as&&jetpackCarouselStrings.local_comments_commenting_as.length){if(1!==Number(jetpackCarouselStrings.is_logged_in)&&1===Number(jetpackCarouselStrings.comment_registration)){commentFormMarkup+='<div id="jp-carousel-comment-form-commenting-as">'+jetpackCarouselStrings.local_comments_commenting_as+'</div>';}else{commentFormMarkup+='<form id="jp-carousel-comment-form">';commentFormMarkup+='<textarea name="comment" class="jp-carousel-comment-form-field jp-carousel-comment-form-textarea" id="jp-carousel-comment-form-comment-field" placeholder="'+jetpackCarouselStrings.write_comment+'"></textarea>';commentFormMarkup+='<div id="jp-carousel-comment-form-submit-and-info-wrapper">';commentFormMarkup+='<div id="jp-carousel-comment-form-commenting-as">'+jetpackCarouselStrings.local_comments_commenting_as+'</div>';commentFormMarkup+='<input type="submit" name="submit" class="jp-carousel-comment-form-button" id="jp-carousel-comment-form-button-submit" value="'+jetpackCarouselStrings.post_comment+'" />';commentFormMarkup+='<span id="jp-carousel-comment-form-spinner">&nbsp;</span>';commentFormMarkup+='<div id="jp-carousel-comment-post-results"></div>';commentFormMarkup+='</div>';commentFormMarkup+='</form>';}}
commentFormMarkup+='</div>';commentForm=$(commentFormMarkup).css({'width':'100%','margin-top':'20px','color':'#999'});comments=$('<div></div>').addClass('jp-carousel-comments').css({'width':'100%','bottom':'10px','margin-top':'20px'});var commentsLoading=$('<div id="jp-carousel-comments-loading"><span>'+jetpackCarouselStrings.loading_comments+'</span></div>').css({'width':'100%','bottom':'10px','margin-top':'20px'});var leftWidth=($(window).width()-(screenPadding*2))-(imageMeta.width()+40);leftWidth+='px';leftColWrapper=$('<div></div>').addClass('jp-carousel-left-column-wrapper').css({'width':Math.floor(leftWidth)}).append(titleAndDescription).append(commentForm).append(comments).append(commentsLoading);var fadeaway=$('<div></div>').addClass('jp-carousel-fadeaway');info=$('<div></div>').addClass('jp-carousel-info').css({'top':Math.floor(($(window).height()/100)*proportion),'left':screenPadding,'right':screenPadding}).append(photo_info).append(imageMeta);if(window.innerWidth<=760){photo_info.remove().insertAfter(titleAndDescription);info.prepend(leftColWrapper);}
else{info.append(leftColWrapper);}
var targetBottomPos=($(window).height()-parseInt(info.css('top'),10))+'px';nextButton=$('<div><span></span></div>').addClass('jp-carousel-next-button').css({'right':'15px'});previousButton=$('<div><span></span></div>').addClass('jp-carousel-previous-button').css({'left':0});nextButton.add(previousButton).css({'position':'fixed','top':'40px','bottom':targetBottomPos,'width':screenPadding});gallery=$('<div></div>').addClass('jp-carousel').css({'position':'absolute','top':0,'bottom':targetBottomPos,'left':0,'right':0});close_hint=$('<div class="jp-carousel-close-hint"><span>&times;</span></div>').css({position:'fixed'});container=$('<div></div>').addClass('jp-carousel-wrap').addClass('jp-carousel-transitions');if('white'===jetpackCarouselStrings.background_color){container.addClass('jp-carousel-light');}
container.css({'position':'fixed','top':0,'right':0,'bottom':0,'left':0,'z-index':2147483647,'overflow-x':'hidden','overflow-y':'auto','direction':'ltr'}).hide().append(overlay).append(gallery).append(fadeaway).append(info).append(nextButton).append(previousButton).append(close_hint).appendTo($('body')).click(function(e){var target=$(e.target),wrap=target.parents('div.jp-carousel-wrap'),data=wrap.data('carousel-extra'),slide=wrap.find('div.selected'),attachment_id=slide.data('attachment-id');data=data||[];if(target.is(gallery)||target.parents().add(target).is(close_hint)){container.jp_carousel('close');}else if(target.hasClass('jp-carousel-commentlink')){e.preventDefault();e.stopPropagation();$(window).unbind('keydown',keyListener);container.animate({scrollTop:parseInt(info.position()['top'],10)},'fast');$('#jp-carousel-comment-form-submit-and-info-wrapper').slideDown('fast');$('#jp-carousel-comment-form-comment-field').focus();}else if(target.hasClass('jp-carousel-comment-login')){var url=jetpackCarouselStrings.login_url+'%23jp-carousel-'+attachment_id;window.location.href=url;}else if(target.parents('#jp-carousel-comment-form-container').length){var textarea=$('#jp-carousel-comment-form-comment-field').blur(function(){$(window).bind('keydown',keyListener);}).focus(function(){$(window).unbind('keydown',keyListener);});var emailField=$('#jp-carousel-comment-form-email-field').blur(function(){$(window).bind('keydown',keyListener);}).focus(function(){$(window).unbind('keydown',keyListener);});var authorField=$('#jp-carousel-comment-form-author-field').blur(function(){$(window).bind('keydown',keyListener);}).focus(function(){$(window).unbind('keydown',keyListener);});var urlField=$('#jp-carousel-comment-form-url-field').blur(function(){$(window).bind('keydown',keyListener);}).focus(function(){$(window).unbind('keydown',keyListener);});if(textarea&&textarea.attr('id')===target.attr('id')){$(window).unbind('keydown',keyListener);$('#jp-carousel-comment-form-submit-and-info-wrapper').slideDown('fast');}else if(target.is('input[type="submit"]')){e.preventDefault();e.stopPropagation();$('#jp-carousel-comment-form-spinner').spin('small','white');var ajaxData={action:'post_attachment_comment',nonce:jetpackCarouselStrings.nonce,blog_id:data['blog_id'],id:attachment_id,comment:textarea.val()};if(!ajaxData['comment'].length){gallery.jp_carousel('postCommentError',{'field':'jp-carousel-comment-form-comment-field','error':jetpackCarouselStrings.no_comment_text});return;}
if(1!==Number(jetpackCarouselStrings.is_logged_in)){ajaxData['email']=emailField.val();ajaxData['author']=authorField.val();ajaxData['url']=urlField.val();if(1===Number(jetpackCarouselStrings.require_name_email)){if(!ajaxData['email'].length||!ajaxData['email'].match('@')){gallery.jp_carousel('postCommentError',{'field':'jp-carousel-comment-form-email-field','error':jetpackCarouselStrings.no_comment_email});return;}else if(!ajaxData['author'].length){gallery.jp_carousel('postCommentError',{'field':'jp-carousel-comment-form-author-field','error':jetpackCarouselStrings.no_comment_author});return;}}}
$.ajax({type:'POST',url:jetpackCarouselStrings.ajaxurl,data:ajaxData,dataType:'json',success:function(response){if('approved'===response.comment_status){$('#jp-carousel-comment-post-results').slideUp('fast').html('<span class="jp-carousel-comment-post-success">'+jetpackCarouselStrings.comment_approved+'</span>').slideDown('fast');}else if('unapproved'===response.comment_status){$('#jp-carousel-comment-post-results').slideUp('fast').html('<span class="jp-carousel-comment-post-success">'+jetpackCarouselStrings.comment_unapproved+'</span>').slideDown('fast');}else{$('#jp-carousel-comment-post-results').slideUp('fast').html('<span class="jp-carousel-comment-post-error">'+jetpackCarouselStrings.comment_post_error+'</span>').slideDown('fast');}
gallery.jp_carousel('clearCommentTextAreaValue');gallery.jp_carousel('getComments',{attachment_id:attachment_id,offset:0,clear:true});$('#jp-carousel-comment-form-button-submit').val(jetpackCarouselStrings.post_comment);$('#jp-carousel-comment-form-spinner').spin(false);},error:function(){gallery.jp_carousel('postCommentError',{'field':'jp-carousel-comment-form-comment-field','error':jetpackCarouselStrings.comment_post_error});return;}});}}else if(!target.parents('.jp-carousel-info').length){container.jp_carousel('next');}}).bind('jp_carousel.afterOpen',function(){$(window).bind('keydown',keyListener);$(window).bind('resize',resizeListener);gallery.opened=true;resizeListener();}).bind('jp_carousel.beforeClose',function(){var scroll=$(window).scrollTop();$(window).unbind('keydown',keyListener);$(window).unbind('resize',resizeListener);$(window).scrollTop(scroll);}).bind('jp_carousel.afterClose',function(){if(history.pushState){history.pushState('',document.title,window.location.pathname+window.location.search);}else{last_known_location_hash='';window.location.hash='';}
gallery.opened=false;}).on('transitionend.jp-carousel ','.jp-carousel-slide',function(e){if('transform'===e.originalEvent.propertyName){var transitionMultiplier=((Date.now()-transitionBegin)/1000)/e.originalEvent.elapsedTime;container.off('transitionend.jp-carousel');if(transitionMultiplier>=2){$('.jp-carousel-transitions').removeClass('jp-carousel-transitions');}}});$('.jp-carousel-wrap').touchwipe({wipeLeft:function(e){e.preventDefault();gallery.jp_carousel('next');},wipeRight:function(e){e.preventDefault();gallery.jp_carousel('previous');},preventDefaultEvents:false});$('.jetpack-likes-widget-unloaded').each(function(){jetpackLikesWidgetQueue.push(this.id);});nextButton.add(previousButton).click(function(e){e.preventDefault();e.stopPropagation();if(nextButton.is(this)){gallery.jp_carousel('next');}else{gallery.jp_carousel('previous');}});}};var methods={testForData:function(gallery){gallery=$(gallery);return!(!gallery.length||!gallery.data('carousel-extra'));},testIfOpened:function(){return!!('undefined'!==typeof(gallery)&&'undefined'!==typeof(gallery.opened)&&gallery.opened);},openOrSelectSlide:function(index){if(!$(this).jp_carousel('testIfOpened')){$(this).jp_carousel('open',{start_index:index});}else{gallery.jp_carousel('selectSlideAtIndex',index);}},open:function(options){var settings={'items_selector':'.gallery-item [data-attachment-id], .tiled-gallery-item [data-attachment-id]','start_index':0},data=$(this).data('carousel-extra');if(!data){return;}
prepareGallery(data);if(gallery.jp_carousel('testIfOpened')){return;}
originalOverflow=$('body').css('overflow');$('body').css('overflow','hidden');originalHOverflow=$('html').css('overflow');$('html').css('overflow','hidden');jQuery('.slim-likes-widget').find('iframe').css('display','inline-block').css('width','60px');container.data('carousel-extra',data);return this.each(function(){var $this=$(this);if(options){$.extend(settings,options);}
if(-1===settings.start_index){settings.start_index=0;}
container.trigger('jp_carousel.beforeOpen').fadeIn('fast',function(){container.trigger('jp_carousel.afterOpen');gallery.jp_carousel('initSlides',$this.find(settings.items_selector),settings.start_index).jp_carousel('selectSlideAtIndex',settings.start_index);});gallery.html('');});},selectSlideAtIndex:function(index){var slides=this.jp_carousel('slides'),selected=slides.eq(index);if(0===selected.length){selected=slides.eq(0);}
gallery.jp_carousel('selectSlide',selected,false);return this;},close:function(){$('body').css('overflow',originalOverflow);$('html').css('overflow',originalHOverflow);return container.trigger('jp_carousel.beforeClose').fadeOut('fast',function(){container.trigger('jp_carousel.afterClose');});},next:function(){var slide=gallery.jp_carousel('nextSlide');container.animate({scrollTop:0},'fast');if(slide){this.jp_carousel('selectSlide',slide);}},previous:function(){var slide=gallery.jp_carousel('prevSlide');container.animate({scrollTop:0},'fast');if(slide){this.jp_carousel('selectSlide',slide);}},resetButtons:function(current){if(current.data('liked')){$('.jp-carousel-buttons a.jp-carousel-like').addClass('liked').text(jetpackCarouselStrings.unlike);}else{$('.jp-carousel-buttons a.jp-carousel-like').removeClass('liked').text(jetpackCarouselStrings.like);}},selectedSlide:function(){return this.find('.selected');},setSlidePosition:function(x){transitionBegin=Date.now();return this.css({'-webkit-transform':'translate3d('+x+'px,0,0)','-moz-transform':'translate3d('+x+'px,0,0)','-ms-transform':'translate('+x+'px,0)','-o-transform':'translate('+x+'px,0)','transform':'translate3d('+x+'px,0,0)'});},updateSlidePositions:function(animate){var current=this.jp_carousel('selectedSlide'),galleryWidth=gallery.width(),currentWidth=current.width(),previous=gallery.jp_carousel('prevSlide'),next=gallery.jp_carousel('nextSlide'),previousPrevious=previous.prev(),nextNext=next.next(),left=Math.floor((galleryWidth-currentWidth)*0.5);current.jp_carousel('setSlidePosition',left).show();gallery.jp_carousel('fitInfo',animate);var direction=lastSelectedSlide.is(current.prevAll())?1:-1;if(1===direction){if(!nextNext.is(previous)){nextNext.jp_carousel('setSlidePosition',galleryWidth+next.width()).show();}
if(!previousPrevious.is(next)){previousPrevious.jp_carousel('setSlidePosition',-previousPrevious.width()-currentWidth).show();}}else{if(!nextNext.is(previous)){nextNext.jp_carousel('setSlidePosition',galleryWidth+currentWidth).show();}}
previous.jp_carousel('setSlidePosition',Math.floor(-previous.width()+(screenPadding*0.75))).show();next.jp_carousel('setSlidePosition',Math.ceil(galleryWidth-(screenPadding*0.75))).show();},selectSlide:function(slide,animate){lastSelectedSlide=this.find('.selected').removeClass('selected');var slides=gallery.jp_carousel('slides').css({'position':'fixed'}),current=$(slide).addClass('selected').css({'position':'relative'}),attachmentId=current.data('attachment-id'),previous=gallery.jp_carousel('prevSlide'),next=gallery.jp_carousel('nextSlide'),previousPrevious=previous.prev(),nextNext=next.next(),animated,captionHtml;gallery.jp_carousel('loadFullImage',current);caption.hide();if(next.length===0&&slides.length<=2){$('.jp-carousel-next-button').hide();}else{$('.jp-carousel-next-button').show();}
if(previous.length===0&&slides.length<=2){$('.jp-carousel-previous-button').hide();}else{$('.jp-carousel-previous-button').show();}
animated=current.add(previous).add(previousPrevious).add(next).add(nextNext).jp_carousel('loadSlide');slides.not(animated).hide();gallery.jp_carousel('updateSlidePositions',animate);gallery.jp_carousel('resetButtons',current);container.trigger('jp_carousel.selectSlide',[current]);gallery.jp_carousel('getTitleDesc',{title:current.data('title'),desc:current.data('desc')});gallery.jp_carousel('loadLikes',attachmentId);gallery.jp_carousel('updateLikesWidgetVisibility',attachmentId);if(next.length>0){gallery.jp_carousel('loadLikes',next.data('attachment-id'));}
if(previous.length>0){gallery.jp_carousel('loadLikes',previous.data('attachment-id'));}
var imageMeta=current.data('image-meta');gallery.jp_carousel('updateExif',imageMeta);gallery.jp_carousel('updateFullSizeLink',current);gallery.jp_carousel('updateMap',imageMeta);gallery.jp_carousel('testCommentsOpened',current.data('comments-opened'));gallery.jp_carousel('getComments',{'attachment_id':attachmentId,'offset':0,'clear':true});$('#jp-carousel-comment-post-results').slideUp();if(current.data('caption')){captionHtml=$('<div />').text(current.data('caption')).html();if(captionHtml===$('<div />').text(current.data('title')).html()){$('.jp-carousel-titleanddesc-title').fadeOut('fast').empty();}
if(captionHtml===$('<div />').text(current.data('desc')).html()){$('.jp-carousel-titleanddesc-desc').fadeOut('fast').empty();}
caption.html(current.data('caption')).fadeIn('slow');}else{caption.fadeOut('fast').empty();}
$(next).add(previous).each(function(){gallery.jp_carousel('loadFullImage',$(this));});window.location.hash=last_known_location_hash='#jp-carousel-'+attachmentId;},slides:function(){return this.find('.jp-carousel-slide');},slideDimensions:function(){return{width:$(window).width()-(screenPadding*2),height:Math.floor($(window).height()/100*proportion-60)};},loadSlide:function(){return this.each(function(){var slide=$(this);slide.find('img').one('load',function(){slide.jp_carousel('fitSlide',false);});});},bestFit:function(){var max=gallery.jp_carousel('slideDimensions'),orig=this.jp_carousel('originalDimensions'),orig_ratio=orig.width/orig.height,w_ratio=1,h_ratio=1,width,height;if(orig.width>max.width){w_ratio=max.width/orig.width;}
if(orig.height>max.height){h_ratio=max.height/orig.height;}
if(w_ratio<h_ratio){width=max.width;height=Math.floor(width/orig_ratio);}else if(h_ratio<w_ratio){height=max.height;width=Math.floor(height*orig_ratio);}else{width=orig.width;height=orig.height;}
return{width:width,height:height};},fitInfo:function(){var current=this.jp_carousel('selectedSlide'),size=current.jp_carousel('bestFit');photo_info.css({'left':Math.floor((info.width()-size.width)*0.5),'width':Math.floor(size.width)});return this;},fitMeta:function(animated){var newInfoTop={top:Math.floor($(window).height()/100*proportion+5)+'px'};var newLeftWidth={width:(info.width()-(imageMeta.width()+80))+'px'};if(animated){info.animate(newInfoTop);leftColWrapper.animate(newLeftWidth);}else{info.animate(newInfoTop);leftColWrapper.css(newLeftWidth);}},fitSlide:function(){return this.each(function(){var $this=$(this),dimensions=$this.jp_carousel('bestFit'),method='css',max=gallery.jp_carousel('slideDimensions');dimensions.left=0;dimensions.top=Math.floor((max.height-dimensions.height)*0.5)+40;$this[method](dimensions);});},texturize:function(text){text=''+text;text=text.replace(/'/g,'&#8217;').replace(/&#039;/g,'&#8217;').replace(/[\u2019]/g,'&#8217;');text=text.replace(/"/g,'&#8221;').replace(/&#034;/g,'&#8221;').replace(/&quot;/g,'&#8221;').replace(/[\u201D]/g,'&#8221;');text=text.replace(/([\w]+)=&#[\d]+;(.+?)&#[\d]+;/g,'$1="$2"');return $.trim(text);},initSlides:function(items,start_index){if(items.length<2){$('.jp-carousel-next-button, .jp-carousel-previous-button').hide();}else{$('.jp-carousel-next-button, .jp-carousel-previous-button').show();}
items.each(function(){var src_item=$(this),orig_size=src_item.data('orig-size')||'',max=gallery.jp_carousel('slideDimensions'),parts=orig_size.split(','),medium_file=src_item.data('medium-file')||'',large_file=src_item.data('large-file')||'',src;orig_size={width:parseInt(parts[0],10),height:parseInt(parts[1],10)};src=src_item.data('orig-file');src=gallery.jp_carousel('selectBestImageSize',{orig_file:src,orig_width:orig_size.width,orig_height:orig_size.height,max_width:max.width,max_height:max.height,medium_file:medium_file,large_file:large_file});$(this).data('gallery-src',src);});if(0!==start_index){$('<img/>')[0].src=$(items[start_index]).data('gallery-src');}
var useInPageThumbnails=items.first().closest('.tiled-gallery.type-rectangular').length>0;items.each(function(i){var src_item=$(this),attachment_id=src_item.data('attachment-id')||0,comments_opened=src_item.data('comments-opened')||0,image_meta=src_item.data('image-meta')||{},orig_size=src_item.data('orig-size')||'',thumb_size={width:src_item[0].naturalWidth,height:src_item[0].naturalHeight},title=src_item.data('image-title')||'',description=src_item.data('image-description')||'',caption=src_item.parents('dl').find('dd.gallery-caption').html()||'',src=src_item.data('gallery-src')||'',medium_file=src_item.data('medium-file')||'',large_file=src_item.data('large-file')||'',orig_file=src_item.data('orig-file')||'';var tiledCaption=src_item.parents('div.tiled-gallery-item').find('div.tiled-gallery-caption').html();if(tiledCaption){caption=tiledCaption;}
if(attachment_id&&orig_size.length){title=gallery.jp_carousel('texturize',title);description=gallery.jp_carousel('texturize',description);caption=gallery.jp_carousel('texturize',caption);var image=$('<img/>').attr('src','data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7').css('width','100%').css('height','100%');var slide=$('<div class="jp-carousel-slide"></div>').hide().css({'left':i<start_index?-1000:gallery.width()}).append(image).appendTo(gallery).data('src',src).data('title',title).data('desc',description).data('caption',caption).data('attachment-id',attachment_id).data('permalink',src_item.parents('a').attr('href')).data('orig-size',orig_size).data('comments-opened',comments_opened).data('image-meta',image_meta).data('medium-file',medium_file).data('large-file',large_file).data('orig-file',orig_file).data('thumb-size',thumb_size);if(useInPageThumbnails){slide.data('preview-image',src_item.attr('src')).css({'background-image':'url("'+src_item.attr('src')+'")','background-size':'100% 100%','background-position':'center center'});}
slide.jp_carousel('fitSlide',false);}});return this;},selectBestImageSize:function(args){if('object'!==typeof args){args={};}
if('undefined'===typeof args.orig_file){return'';}
if('undefined'===typeof args.orig_width||'undefined'===typeof args.max_width){return args.orig_file;}
if('undefined'===typeof args.medium_file||'undefined'===typeof args.large_file){return args.orig_file;}
var medium_size=args.medium_file.replace(/-([\d]+x[\d]+)\..+$/,'$1'),medium_size_parts=(medium_size!==args.medium_file)?medium_size.split('x'):[args.orig_width,0],medium_width=parseInt(medium_size_parts[0],10),medium_height=parseInt(medium_size_parts[1],10),large_size=args.large_file.replace(/-([\d]+x[\d]+)\..+$/,'$1'),large_size_parts=(large_size!==args.large_file)?large_size.split('x'):[args.orig_width,0],large_width=parseInt(large_size_parts[0],10),large_height=parseInt(large_size_parts[1],10);if('undefined'!==typeof window.devicePixelRatio&&window.devicePixelRatio>1){args.max_width=args.max_width*window.devicePixelRatio;args.max_height=args.max_height*window.devicePixelRatio;}
if(large_width>=args.max_width||large_height>=args.max_height){return args.large_file;}
if(medium_width>=args.max_width||medium_height>=args.max_height){return args.medium_file;}
return args.orig_file;},originalDimensions:function(){var splitted=$(this).data('orig-size').split(',');return{width:parseInt(splitted[0],10),height:parseInt(splitted[1],10)};},format:function(args){if('object'!==typeof args){args={};}
if(!args.text||'undefined'===typeof args.text){return;}
if(!args.replacements||'undefined'===typeof args.replacements){return args.text;}
return args.text.replace(/{(\d+)}/g,function(match,number){return typeof args.replacements[number]!=='undefined'?args.replacements[number]:match;});},shutterSpeed:function(d){if(d>=1){return Math.round(d*10)/10+'s';}
var df=1,top=1,bot=1;var tol=1e-8;while(df!==d&&Math.abs(df-d)>tol){if(df<d){top+=1;}else{bot+=1;top=parseInt(d*bot,10);}
df=top/bot;}
if(top>1){bot=Math.round(bot/top);top=1;}
if(bot<=1){return'1s';}
return top+'/'+bot+'s';},parseTitleDesc:function(value){if(!value.match(' ')&&value.match('_')){return'';}
$(['CIMG','DSC_','DSCF','DSCN','DUW','GEDC','IMG','JD','MGP','PICT','Imagen','Foto','DSC','Scan','SANY','SAM','Screen Shot [0-9]+']).each(function(key,val){var regex=new RegExp('^'+val);if(regex.test(value)){value='';return;}});return value;},getTitleDesc:function(data){var title='',desc='',markup='',target;target=$('div.jp-carousel-titleanddesc','div.jp-carousel-wrap');target.hide();title=gallery.jp_carousel('parseTitleDesc',data.title)||'';desc=gallery.jp_carousel('parseTitleDesc',data.desc)||'';if(title.length||desc.length){if($('<div />').text(title).html()===$('<div />').text(desc).html()){title='';}
markup=(title.length)?'<div class="jp-carousel-titleanddesc-title">'+title+'</div>':'';markup+=(desc.length)?'<div class="jp-carousel-titleanddesc-desc">'+desc+'</div>':'';target.html(markup).fadeIn('slow');}
$('div#jp-carousel-comment-form-container').css('margin-top','20px');$('div#jp-carousel-comments-loading').css('margin-top','20px');},updateLikesWidgetVisibility:function(attachmentId){if('undefined'===typeof jetpackLikesWidgetQueue){return;}
$('.jp-carousel-buttons .jetpack-likes-widget-wrapper').css('display','none').each(function(){var widgetWrapper=$(this);if(widgetWrapper.attr('data-attachment-id')==attachmentId){widgetWrapper.css('display','inline-block');return false;}});},loadLikes:function(attachmentId){var dataCarouselExtra=$('.jp-carousel-wrap').data('carousel-extra');var blogId=dataCarouselExtra.likes_blog_id;if($('#like-post-wrapper-'+blogId+'-'+attachmentId).length===0){var protocol='http';var originDomain='http://wordpress.com';if(dataCarouselExtra.permalink.length){protocol=dataCarouselExtra.permalink.split(':')[0];if((protocol!=='http')&&(protocol!=='https')){protocol='http';}
var parts=dataCarouselExtra.permalink.split('/');if(parts.length>=2){originDomain=protocol+'://'+parts[2];}}
var dataSource=protocol+'://widgets.wp.com/likes/#blog_id='+encodeURIComponent(blogId)+'&post_id='+encodeURIComponent(attachmentId)+'&slim=1&origin='+encodeURIComponent(originDomain);if('en'!==jetpackCarouselStrings.lang){dataSource+='&lang='+encodeURIComponent(jetpackCarouselStrings.lang);}
var likesWidget=$('<iframe class=\'post-likes-widget jetpack-likes-widget jetpack-resizeable\'></iframe>').attr('name','like-post-frame-'+blogId+'-'+attachmentId).attr('src',dataSource).css('display','inline-block');var likesWidgetWrapper=$('<div/>').addClass('jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded slim-likes-widget').attr('id','like-post-wrapper-'+blogId+'-'+attachmentId).attr('data-src',dataSource).attr('data-name','like-post-frame-'+blogId+'-'+attachmentId).attr('data-attachment-id',attachmentId).css('display','none').css('vertical-align','middle').append(likesWidget).append('<div class=\'post-likes-widget-placeholder\'></div>');$('.jp-carousel-buttons').append(likesWidgetWrapper);}},updateExif:function(meta){if(!meta||1!==Number(jetpackCarouselStrings.display_exif)){return false;}
var $ul=$('<ul class=\'jp-carousel-image-exif\'></ul>');$.each(meta,function(key,val){if(0===parseFloat(val)||!val.length||-1===$.inArray(key,['camera','aperture','shutter_speed','focal_length'])){return;}
switch(key){case'focal_length':val=val+'mm';break;case'shutter_speed':val=gallery.jp_carousel('shutterSpeed',val);break;case'aperture':val='f/'+val;break;}
$ul.append('<li><h5>'+jetpackCarouselStrings[key]+'</h5>'+val+'</li>');});$('div.jp-carousel-image-meta ul.jp-carousel-image-exif').replaceWith($ul);},updateFullSizeLink:function(current){if(!current||!current.data){return false;}
var original=current.data('orig-file').replace(/\?.+$/,''),origSize=current.data('orig-size').split(','),permalink=$('<a>'+gallery.jp_carousel('format',{'text':jetpackCarouselStrings.download_original,'replacements':origSize})+'</a>').addClass('jp-carousel-image-download').attr('href',original).attr('target','_blank');$('div.jp-carousel-image-meta a.jp-carousel-image-download').replaceWith(permalink);},updateMap:function(meta){if(!meta.latitude||!meta.longitude||1!==Number(jetpackCarouselStrings.display_geo)){return;}
var latitude=meta.latitude,longitude=meta.longitude,$metabox=$('div.jp-carousel-image-meta','div.jp-carousel-wrap'),$mapbox=$('<div></div>'),style='&scale=2&style=feature:all|element:all|invert_lightness:true|hue:0x0077FF|saturation:-50|lightness:-5|gamma:0.91';$mapbox.addClass('jp-carousel-image-map').html('<img width="154" height="154" src="https://maps.googleapis.com/maps/api/staticmap?\
       center='+latitude+','+longitude+'&\
       zoom=8&\
       size=154x154&\
       sensor=false&\
       markers=size:medium%7Ccolor:blue%7C'+latitude+','+longitude+style+'" class="gmap-main" />\
       \
      <div class="gmap-topright"><div class="imgclip"><img width="175" height="154" src="https://maps.googleapis.com/maps/api/staticmap?\
       center='+latitude+','+longitude+'&\
       zoom=3&\
       size=175x154&\
       sensor=false&\
       markers=size:small%7Ccolor:blue%7C'+latitude+','+longitude+style+'"c /></div></div>\
       \
      ').prependTo($metabox);},testCommentsOpened:function(opened){if(1===parseInt(opened,10)){$('.jp-carousel-buttons').fadeIn('fast');commentForm.fadeIn('fast');}else{$('.jp-carousel-buttons').fadeOut('fast');commentForm.fadeOut('fast');}},getComments:function(args){clearInterval(commentInterval);if('object'!==typeof args){return;}
if('undefined'===typeof args.attachment_id||!args.attachment_id){return;}
if(!args.offset||'undefined'===typeof args.offset||args.offset<1){args.offset=0;}
var comments=$('.jp-carousel-comments'),commentsLoading=$('#jp-carousel-comments-loading').show();if(args.clear){comments.hide().empty();}
$.ajax({type:'GET',url:jetpackCarouselStrings.ajaxurl,dataType:'json',data:{action:'get_attachment_comments',nonce:jetpackCarouselStrings.nonce,id:args.attachment_id,offset:args.offset},success:function(data){if(args.clear){comments.fadeOut('fast').empty();}
$(data).each(function(){var comment=$('<div></div>').addClass('jp-carousel-comment').attr('id','jp-carousel-comment-'+this['id']).html('<div class="comment-gravatar">'+
this['gravatar_markup']+'</div>'+'<div class="comment-author">'+
this['author_markup']+'</div>'+'<div class="comment-date">'+
this['date_gmt']+'</div>'+'<div class="comment-content">'+
this['content']+'</div>');comments.append(comment);clearInterval(commentInterval);commentInterval=setInterval(function(){if(($('.jp-carousel-overlay').height()-150)<$('.jp-carousel-wrap').scrollTop()+$(window).height()){gallery.jp_carousel('getComments',{attachment_id:args.attachment_id,offset:args.offset+10,clear:false});clearInterval(commentInterval);}},300);});var current=$('.jp-carousel div.selected');if(current&&current.data&&current.data('attachment-id')!=args.attachment_id){comments.fadeOut('fast');comments.empty();return;}
$('.jp-carousel-overlay').height($(window).height()+titleAndDescription.height()+commentForm.height()+((comments.height()>0)?comments.height():imageMeta.height())+200);comments.show();commentsLoading.hide();},error:function(xhr,status,error){console.log('Comment get fail...',xhr,status,error);comments.fadeIn('fast');commentsLoading.fadeOut('fast');}});},postCommentError:function(args){if('object'!==typeof args){args={};}
if(!args.field||'undefined'===typeof args.field||!args.error||'undefined'===typeof args.error){return;}
$('#jp-carousel-comment-post-results').slideUp('fast').html('<span class="jp-carousel-comment-post-error">'+args.error+'</span>').slideDown('fast');$('#jp-carousel-comment-form-spinner').spin(false);},setCommentIframeSrc:function(attachment_id){var iframe=$('#jp-carousel-comment-iframe');if(iframe&&iframe.length){iframe.attr('src',iframe.attr('src').replace(/(postid=)\d+/,'$1'+attachment_id));iframe.attr('src',iframe.attr('src').replace(/(%23.+)?$/,'%23jp-carousel-'+attachment_id));}},clearCommentTextAreaValue:function(){var commentTextArea=$('#jp-carousel-comment-form-comment-field');if(commentTextArea){commentTextArea.val('');}},nextSlide:function(){var slides=this.jp_carousel('slides');var selected=this.jp_carousel('selectedSlide');if(selected.length===0||(slides.length>2&&selected.is(slides.last()))){return slides.first();}
return selected.next();},prevSlide:function(){var slides=this.jp_carousel('slides');var selected=this.jp_carousel('selectedSlide');if(selected.length===0||(slides.length>2&&selected.is(slides.first()))){return slides.last();}
return selected.prev();},loadFullImage:function(slide){var image=slide.find('img:first');if(!image.data('loaded')){image.on('load.jetpack',function(){image.off('load.jetpack');$(this).closest('.jp-carousel-slide').css('background-image','');});if(!slide.data('preview-image')||(slide.data('thumb-size')&&slide.width()>slide.data('thumb-size').width)){image.attr('src',image.closest('.jp-carousel-slide').data('src'));}else{image.attr('src',slide.data('preview-image'));}
image.data('loaded',1);}}};$.fn.jp_carousel=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.open.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.jp_carousel');}};$(document.body).on('click','div.gallery,div.tiled-gallery',function(e){if(!$(this).jp_carousel('testForData',e.currentTarget)){return;}
if($(e.target).parent().hasClass('gallery-caption')){return;}
e.preventDefault();$(this).jp_carousel('open',{start_index:$(this).find('.gallery-item, .tiled-gallery-item').index($(e.target).parents('.gallery-item, .tiled-gallery-item'))});});$(window).on('hashchange',function(){var hashRegExp=/jp-carousel-(\d+)/,matches,attachmentId,galleries,selectedThumbnail;if(!window.location.hash||!hashRegExp.test(window.location.hash)){return;}
if(window.location.hash===last_known_location_hash){return;}
last_known_location_hash=window.location.hash;matches=window.location.hash.match(hashRegExp);attachmentId=parseInt(matches[1],10);galleries=$('div.gallery, div.tiled-gallery');galleries.each(function(_,galleryEl){$(galleryEl).find('img').each(function(imageIndex,imageEl){if($(imageEl).data('attachment-id')===parseInt(attachmentId,10)){selectedThumbnail={index:imageIndex,gallery:galleryEl};return false;}});if(selectedThumbnail){$(selectedThumbnail.gallery).jp_carousel('openOrSelectSlide',selectedThumbnail.index);}});});if(window.location.hash){$(window).trigger('hashchange');}});(function($){$.fn.touchwipe=function(settings){var config={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:true};if(settings){$.extend(config,settings);}
this.each(function(){var startX;var startY;var isMoving=false;function cancelTouch(){this.removeEventListener('touchmove',onTouchMove);startX=null;isMoving=false;}
function onTouchMove(e){if(config.preventDefaultEvents){e.preventDefault();}
if(isMoving){var x=e.touches[0].pageX;var y=e.touches[0].pageY;var dx=startX-x;var dy=startY-y;if(Math.abs(dx)>=config.min_move_x){cancelTouch();if(dx>0){config.wipeLeft(e);}else{config.wipeRight(e);}}
else if(Math.abs(dy)>=config.min_move_y){cancelTouch();if(dy>0){config.wipeDown(e);}else{config.wipeUp(e);}}}}
function onTouchStart(e)
{if(e.touches.length===1){startX=e.touches[0].pageX;startY=e.touches[0].pageY;isMoving=true;this.addEventListener('touchmove',onTouchMove,false);}}
if('ontouchstart'in document.documentElement){this.addEventListener('touchstart',onTouchStart,false);}});return this;};})(jQuery);;var NO_JQUERY={};(function(window,$,undefined){if(!("console"in window)){var c=window.console={};c.log=c.warn=c.error=c.debug=function(){};}
if($===NO_JQUERY){$={fn:{},extend:function(){var a=arguments[0];for(var i=1,len=arguments.length;i<len;i++){var b=arguments[i];for(var prop in b){a[prop]=b[prop];}}
return a;}};}
$.fn.pm=function(){console.log("usage: \nto send:    $.pm(options)\nto receive: $.pm.bind(type, fn, [origin])");return this;};$.pm=window.pm=function(options){pm.send(options);};$.pm.bind=window.pm.bind=function(type,fn,origin,hash,async_reply){pm.bind(type,fn,origin,hash,async_reply===true);};$.pm.unbind=window.pm.unbind=function(type,fn){pm.unbind(type,fn);};$.pm.origin=window.pm.origin=null;$.pm.poll=window.pm.poll=200;var pm={send:function(options){var o=$.extend({},pm.defaults,options),target=o.target;if(!o.target){console.warn("postmessage target window required");return;}
if(!o.type){console.warn("postmessage type required");return;}
var msg={data:o.data,type:o.type};if(o.success){msg.callback=pm._callback(o.success);}
if(o.error){msg.errback=pm._callback(o.error);}
if(("postMessage"in target)&&!o.hash){pm._bind();target.postMessage(JSON.stringify(msg),o.origin||'*');}
else{pm.hash._bind();pm.hash.send(o,msg);}},bind:function(type,fn,origin,hash,async_reply){pm._replyBind(type,fn,origin,hash,async_reply);},_replyBind:function(type,fn,origin,hash,isCallback){if(("postMessage"in window)&&!hash){pm._bind();}
else{pm.hash._bind();}
var l=pm.data("listeners.postmessage");if(!l){l={};pm.data("listeners.postmessage",l);}
var fns=l[type];if(!fns){fns=[];l[type]=fns;}
fns.push({fn:fn,callback:isCallback,origin:origin||$.pm.origin});},unbind:function(type,fn){var l=pm.data("listeners.postmessage");if(l){if(type){if(fn){var fns=l[type];if(fns){var m=[];for(var i=0,len=fns.length;i<len;i++){var o=fns[i];if(o.fn!==fn){m.push(o);}}
l[type]=m;}}
else{delete l[type];}}
else{for(var i in l){delete l[i];}}}},data:function(k,v){if(v===undefined){return pm._data[k];}
pm._data[k]=v;return v;},_data:{},_CHARS:'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split(''),_random:function(){var r=[];for(var i=0;i<32;i++){r[i]=pm._CHARS[0|Math.random()*32];};return r.join("");},_callback:function(fn){var cbs=pm.data("callbacks.postmessage");if(!cbs){cbs={};pm.data("callbacks.postmessage",cbs);}
var r=pm._random();cbs[r]=fn;return r;},_bind:function(){if(!pm.data("listening.postmessage")){if(window.addEventListener){window.addEventListener("message",pm._dispatch,false);}
else if(window.attachEvent){window.attachEvent("onmessage",pm._dispatch);}
pm.data("listening.postmessage",1);}},_dispatch:function(e){try{var msg=JSON.parse(e.data);}
catch(ex){return;}
if(!msg.type){return;}
var cbs=pm.data("callbacks.postmessage")||{},cb=cbs[msg.type];if(cb){cb(msg.data);}
else{var l=pm.data("listeners.postmessage")||{};var fns=l[msg.type]||[];for(var i=0,len=fns.length;i<len;i++){var o=fns[i];if(o.origin&&o.origin!=='*'&&e.origin!==o.origin){console.warn("postmessage message origin mismatch",e.origin,o.origin);if(msg.errback){var error={message:"postmessage origin mismatch",origin:[e.origin,o.origin]};pm.send({target:e.source,data:error,type:msg.errback});}
continue;}
function sendReply(data){if(msg.callback){pm.send({target:e.source,data:data,type:msg.callback});}}
try{if(o.callback){o.fn(msg.data,sendReply,e);}else{sendReply(o.fn(msg.data,e));}}
catch(ex){if(msg.errback){pm.send({target:e.source,data:ex,type:msg.errback});}else{throw ex;}}};}}};pm.hash={send:function(options,msg){var target_window=options.target,target_url=options.url;if(!target_url){console.warn("postmessage target window url is required");return;}
target_url=pm.hash._url(target_url);var source_window,source_url=pm.hash._url(window.location.href);if(window==target_window.parent){source_window="parent";}
else{try{for(var i=0,len=parent.frames.length;i<len;i++){var f=parent.frames[i];if(f==window){source_window=i;break;}};}
catch(ex){source_window=window.name;}}
if(source_window==null){console.warn("postmessage windows must be direct parent/child windows and the child must be available through the parent window.frames list");return;}
var hashmessage={"x-requested-with":"postmessage",source:{name:source_window,url:source_url},postmessage:msg};var hash_id="#x-postmessage-id="+pm._random();target_window.location=target_url+hash_id+encodeURIComponent(JSON.stringify(hashmessage));},_regex:/^\#x\-postmessage\-id\=(\w{32})/,_regex_len:"#x-postmessage-id=".length+32,_bind:function(){if(!pm.data("polling.postmessage")){setInterval(function(){var hash=""+window.location.hash,m=pm.hash._regex.exec(hash);if(m){var id=m[1];if(pm.hash._last!==id){pm.hash._last=id;pm.hash._dispatch(hash.substring(pm.hash._regex_len));}}},$.pm.poll||200);pm.data("polling.postmessage",1);}},_dispatch:function(hash){if(!hash){return;}
try{hash=JSON.parse(decodeURIComponent(hash));if(!(hash['x-requested-with']==='postmessage'&&hash.source&&hash.source.name!=null&&hash.source.url&&hash.postmessage)){return;}}
catch(ex){return;}
var msg=hash.postmessage,cbs=pm.data("callbacks.postmessage")||{},cb=cbs[msg.type];if(cb){cb(msg.data);}
else{var source_window;if(hash.source.name==="parent"){source_window=window.parent;}
else{source_window=window.frames[hash.source.name];}
var l=pm.data("listeners.postmessage")||{};var fns=l[msg.type]||[];for(var i=0,len=fns.length;i<len;i++){var o=fns[i];if(o.origin){var origin=/https?\:\/\/[^\/]*/.exec(hash.source.url)[0];if(o.origin!=='*'&&origin!==o.origin){console.warn("postmessage message origin mismatch",origin,o.origin);if(msg.errback){var error={message:"postmessage origin mismatch",origin:[origin,o.origin]};pm.send({target:source_window,data:error,type:msg.errback,hash:true,url:hash.source.url});}
continue;}}
function sendReply(data){if(msg.callback){pm.send({target:source_window,data:data,type:msg.callback,hash:true,url:hash.source.url});}}
try{if(o.callback){o.fn(msg.data,sendReply);}else{sendReply(o.fn(msg.data));}}
catch(ex){if(msg.errback){pm.send({target:source_window,data:ex,type:msg.errback,hash:true,url:hash.source.url});}else{throw ex;}}};}},_url:function(url){return(""+url).replace(/#.*$/,"");}};$.extend(pm,{defaults:{target:null,url:null,type:null,data:null,success:null,error:null,origin:"*",hash:false}});})(this,typeof jQuery==="undefined"?NO_JQUERY:jQuery);if(!("JSON"in window&&window.JSON)){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());;(function($){var listening=false,sourceOrigins=[],$sources=false,URLtoOrigin,setupListener,destroyListener,methods;if('undefined'===typeof window.Jetpack){window.Jetpack={getTarget:function(context){if(this instanceof jQuery){return context?this.filter(context):this;}
return context?$(context):context;}};}
if('undefined'===typeof $.fn.Jetpack){$.fn.Jetpack=function(namespace){if('function'===typeof Jetpack[namespace]){return Jetpack[namespace].apply(this,Array.prototype.slice.call(arguments,1));}else{$.error('Namespace "'+namespace+'" does not exist on jQuery.Jetpack');}};}
if('function'!==typeof window.postMessage){$.extend(window.Jetpack,{resizeable:function(){$.error('Browser does not support window.postMessage');}});return;}
URLtoOrigin=function(URL){if(!URL.match(/^https?:\/\//)){URL=document.location.href;}
return URL.split('/').slice(0,3).join('/');};setupListener=function(){listening=true;$(window).on('message.JetpackResizeableIframe',function(e){var event=e.originalEvent,data;if(-1===$.inArray(event.origin,sourceOrigins)){return;}
if('object'===typeof event.data){data=event.data.data;}else{try{data=JSON.parse(event.data);}catch(err){data=false;}}
if(!data.data){return;}
data=data.data;if('undefined'===typeof data.action||'resize'!==data.action){return;}
$sources.filter(function(){if('undefined'!==typeof data.name){return this.name===data.name;}else{return event.source===this.contentWindow;}}).first().Jetpack('resizeable','resize',data);});};destroyListener=function(){listening=false;$(window).off('message.JetpackResizeableIframe');sourceOrigins=[];$('.jetpack-resizeable').removeClass('jetpack-resizeable');$sources=false;};methods={on:function(context){var target=Jetpack.getTarget.call(this,context);if(!listening){setupListener();}
target.each(function(){sourceOrigins.push(URLtoOrigin($(this).attr('src')));}).addClass('jetpack-resizeable');$sources=$('.jetpack-resizeable');return target;},off:function(context){var target=Jetpack.getTarget.call(this,context);if('undefined'===typeof target){destroyListener();return target;}
target.each(function(){var origin=URLtoOrigin($(this).attr('src')),pos=$.inArray(origin,sourceOrigins);if(-1!==pos){sourceOrigins.splice(pos,1);}}).removeClass('jetpack-resizeable');$sources=$('.jetpack-resizeable');return target;},resize:function(dimensions,context){var target=Jetpack.getTarget.call(this,context);$.each(['width','height'],function(i,variable){var value=0,container;if('undefined'!==typeof dimensions[variable]){value=parseInt(dimensions[variable],10);}
if(0!==value){target[variable](value);container=target.parent();if(container.hasClass('slim-likes-widget')){container[variable](value);}}});return target;}};$.extend(window.Jetpack,{resizeable:function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(!method){return methods.on.apply(this);}else{$.error('Method '+method+' does not exist on Jetpack.resizeable');}}});})(jQuery);;(function($){var inviewObjects={},viewportSize,viewportOffset,d=document,w=window,documentElement=d.documentElement,expando=$.expando;$.event.special.inview={add:function(data){inviewObjects[data.guid+"-"+this[expando]]={data:data,$element:$(this)};},remove:function(data){try{delete inviewObjects[data.guid+"-"+this[expando]];}catch(e){}}};function getViewportSize(){var mode,domObject,size={height:w.innerHeight,width:w.innerWidth};if(!size.height){mode=d.compatMode;if(mode||!$.support.boxModel){domObject=mode==='CSS1Compat'?documentElement:d.body;size={height:domObject.clientHeight,width:domObject.clientWidth};}}
return size;}
function getViewportOffset(){return{top:w.pageYOffset||documentElement.scrollTop||d.body.scrollTop,left:w.pageXOffset||documentElement.scrollLeft||d.body.scrollLeft};}
function checkInView(){var $elements=$(),elementsLength,i=0;$.each(inviewObjects,function(i,inviewObject){var selector=inviewObject.data.selector,$element=inviewObject.$element;$elements=$elements.add(selector?$element.find(selector):$element);});elementsLength=$elements.length;if(elementsLength){viewportSize=viewportSize||getViewportSize();viewportOffset=viewportOffset||getViewportOffset();for(;i<elementsLength;i++){if(!$.contains(documentElement,$elements[i])){continue;}
var element=$elements[i],$element=$(element),elementSize={},elementOffset={},inView=$element.data('inview'),visiblePartX,visiblePartY,visiblePartsMerged;if($element.css('display')=='none')
{var parentElement=$element.parent();elementOffset.top=parentElement.offset().top;elementOffset.left=parentElement.offset().left;elementSize.height=parentElement.height();elementSize.width=parentElement.width();}else{elementSize={height:$element.height(),width:$element.width()}
elementOffset=$element.offset();}
if(!viewportOffset||!viewportSize){return;}
if(element.offsetWidth>=0&&element.offsetHeight>=0&&element.style.display!="none"&&elementOffset.top+elementSize.height>viewportOffset.top&&elementOffset.top<viewportOffset.top+viewportSize.height&&elementOffset.left+elementSize.width>viewportOffset.left&&elementOffset.left<viewportOffset.left+viewportSize.width){visiblePartX=(viewportOffset.left>elementOffset.left?'right':(viewportOffset.left+viewportSize.width)<(elementOffset.left+elementSize.width)?'left':'both');visiblePartY=(viewportOffset.top>elementOffset.top?'bottom':(viewportOffset.top+viewportSize.height)<(elementOffset.top+elementSize.height)?'top':'both');visiblePartsMerged=visiblePartX+"-"+visiblePartY;if(!inView||inView!==visiblePartsMerged){$element.data('inview',visiblePartsMerged).trigger('inview',[true,visiblePartX,visiblePartY]);}}else if(inView){$element.data('inview',false).trigger('inview',[false]);}}}}
$(w).bind("scroll resize",function(){viewportSize=viewportOffset=null;});if(!documentElement.addEventListener&&documentElement.attachEvent){documentElement.attachEvent("onfocusin",function(){viewportOffset=null;});}
setInterval(checkInView,250);})(jQuery);;var jetpackLikesWidgetQueue=[];var jetpackLikesWidgetBatch=[];var jetpackLikesMasterReady=false;function JetpackLikespostMessage(message,target){if('string'===typeof message){try{message=JSON.parse(message);}catch(e){return;}}
pm({target:target,type:'likesMessage',data:message,origin:'*'});}
function JetpackLikesBatchHandler(){var requests=[];jQuery('div.jetpack-likes-widget-unloaded').each(function(){if(jetpackLikesWidgetBatch.indexOf(this.id)>-1){return;}
jetpackLikesWidgetBatch.push(this.id);var regex=/like-(post|comment)-wrapper-(\d+)-(\d+)-(\w+)/,match=regex.exec(this.id),info;if(!match||match.length!==5){return;}
info={blog_id:match[2],width:this.width};if('post'===match[1]){info.post_id=match[3];}else if('comment'===match[1]){info.comment_id=match[3];}
info.obj_id=match[4];requests.push(info);});if(requests.length>0){JetpackLikespostMessage({event:'initialBatch',requests:requests},window.frames['likes-master']);}}
function JetpackLikesMessageListener(event){if('undefined'===typeof event.event){return;}
if('masterReady'===event.event){jQuery(document).ready(function(){jetpackLikesMasterReady=true;var stylesData={event:'injectStyles'},$sdTextColor=jQuery('.sd-text-color'),$sdLinkColor=jQuery('.sd-link-color');if(jQuery('iframe.admin-bar-likes-widget').length>0){JetpackLikespostMessage({event:'adminBarEnabled'},window.frames['likes-master']);stylesData.adminBarStyles={background:jQuery('#wpadminbar .quicklinks li#wp-admin-bar-wpl-like > a').css('background'),isRtl:('rtl'===jQuery('#wpadminbar').css('direction'))};}
if(!window.addEventListener){jQuery('#wp-admin-bar-admin-bar-likes-widget').hide();}
stylesData.textStyles={color:$sdTextColor.css('color'),fontFamily:$sdTextColor.css('font-family'),fontSize:$sdTextColor.css('font-size'),direction:$sdTextColor.css('direction'),fontWeight:$sdTextColor.css('font-weight'),fontStyle:$sdTextColor.css('font-style'),textDecoration:$sdTextColor.css('text-decoration')};stylesData.linkStyles={color:$sdLinkColor.css('color'),fontFamily:$sdLinkColor.css('font-family'),fontSize:$sdLinkColor.css('font-size'),textDecoration:$sdLinkColor.css('text-decoration'),fontWeight:$sdLinkColor.css('font-weight'),fontStyle:$sdLinkColor.css('font-style')};JetpackLikespostMessage(stylesData,window.frames['likes-master']);JetpackLikesBatchHandler();jQuery(document).on('inview','div.jetpack-likes-widget-unloaded',function(){jetpackLikesWidgetQueue.push(this.id);});});}
if('showLikeWidget'===event.event){jQuery('#'+event.id+' .post-likes-widget-placeholder').fadeOut('fast',function(){jQuery('#'+event.id+' .post-likes-widget').fadeIn('fast',function(){JetpackLikespostMessage({event:'likeWidgetDisplayed',blog_id:event.blog_id,post_id:event.post_id,obj_id:event.obj_id},window.frames['likes-master']);});});}
if('clickReblogFlair'===event.event){wpcom_reblog.toggle_reblog_box_flair(event.obj_id);}
if('showOtherGravatars'===event.event){var $container=jQuery('#likes-other-gravatars'),$list=$container.find('ul'),offset,rowLength,height,scrollbarWidth;$container.hide();$list.html('');$container.find('.likes-text span').text(event.total);jQuery.each(event.likers,function(i,liker){$list.append('<li class="'+liker.css_class+'"><a href="'+liker.profile_URL+'" class="wpl-liker" rel="nofollow" target="_parent"><img src="'+liker.avatar_URL+'" alt="'+liker.name+'" width="30" height="30" style="padding-right: 3px;" /></a></li>');});offset=jQuery('[name=\''+event.parent+'\']').offset();$container.css('left',offset.left+event.position.left-10+'px');$container.css('top',offset.top+event.position.top-33+'px');rowLength=Math.floor(event.width/37);height=(Math.ceil(event.likers.length/rowLength)*37)+13;if(height>204){height=204;}
$container.css('height',height+'px');$container.css('width',rowLength*37-7+'px');$list.css('width',rowLength*37+'px');$container.fadeIn('slow');scrollbarWidth=$list[0].offsetWidth-$list[0].clientWidth;if(scrollbarWidth>0){$container.width($container.width()+scrollbarWidth);$list.width($list.width()+scrollbarWidth);}}}
pm.bind('likesMessage',function(e){JetpackLikesMessageListener(e);});jQuery(document).click(function(e){var $container=jQuery('#likes-other-gravatars');if($container.has(e.target).length===0){$container.fadeOut('slow');}});function JetpackLikesWidgetQueueHandler(){var $wrapper,wrapperID,found;if(!jetpackLikesMasterReady){setTimeout(JetpackLikesWidgetQueueHandler,500);return;}
if(jetpackLikesWidgetQueue.length>0){found=false;while(jetpackLikesWidgetQueue.length>0){wrapperID=jetpackLikesWidgetQueue.splice(0,1)[0];if(jQuery('#'+wrapperID).hasClass('jetpack-likes-widget-unloaded')){found=true;break;}}
if(!found){setTimeout(JetpackLikesWidgetQueueHandler,500);return;}}else if(jQuery('div.jetpack-likes-widget-unloaded').length>0){JetpackLikesBatchHandler();wrapperID=jQuery('div.jetpack-likes-widget-unloaded').first()[0].id;if(!wrapperID){setTimeout(JetpackLikesWidgetQueueHandler,500);return;}}
if('undefined'===typeof wrapperID){setTimeout(JetpackLikesWidgetQueueHandler,500);return;}
$wrapper=jQuery('#'+wrapperID);$wrapper.find('iframe').remove();if($wrapper.hasClass('slim-likes-widget')){$wrapper.find('.post-likes-widget-placeholder').after('<iframe class="post-likes-widget jetpack-likes-widget" name="'+$wrapper.data('name')+'" height="22px" width="68px" frameBorder="0" scrolling="no" src="'+$wrapper.data('src')+'"></iframe>');}else{$wrapper.find('.post-likes-widget-placeholder').after('<iframe class="post-likes-widget jetpack-likes-widget" name="'+$wrapper.data('name')+'" height="55px" width="100%" frameBorder="0" src="'+$wrapper.data('src')+'"></iframe>');}
$wrapper.removeClass('jetpack-likes-widget-unloaded').addClass('jetpack-likes-widget-loading');$wrapper.find('iframe').load(function(e){var $iframe=jQuery(e.target);$wrapper.removeClass('jetpack-likes-widget-loading').addClass('jetpack-likes-widget-loaded');JetpackLikespostMessage({event:'loadLikeWidget',name:$iframe.attr('name'),width:$iframe.width()},window.frames['likes-master']);if($wrapper.hasClass('slim-likes-widget')){$wrapper.find('iframe').Jetpack('resizeable');}});setTimeout(JetpackLikesWidgetQueueHandler,250);}
JetpackLikesWidgetQueueHandler();;if(sharing_js_options&&sharing_js_options.counts){var WPCOMSharing={done_urls:[],twitter_count:{},get_counts:function(url){var https_url,http_url,urls,id,service,service_urls,service_url;id=WPCOM_sharing_counts[url];if('undefined'!=typeof WPCOMSharing.done_urls[id]){return;}
https_url=encodeURIComponent(url.replace(/^http:\/\//i,'https://'));http_url=encodeURIComponent(url.replace(/^https:\/\//i,'http://'));urls={facebook:['https://graph.facebook.com/?ids='+
http_url+','+
https_url+'&format=json&callback=WPCOMSharing.update_facebook_count'],twitter:[window.location.protocol+'//cdn.api.twitter.com/1/urls/count.json?callback=WPCOMSharing.update_twitter_count&url='+
http_url,window.location.protocol+'//cdn.api.twitter.com/1/urls/count.json?callback=WPCOMSharing.update_twitter_count&url='+
https_url],linkedin:[window.location.protocol+'//www.linkedin.com/countserv/count/share?format=jsonp&callback=WPCOMSharing.update_linkedin_count&url='+
encodeURIComponent(url)],pinterest:[window.location.protocol+'//api.pinterest.com/v1/urls/count.json?callback=WPCOMSharing.update_pinterest_count&url='+
encodeURIComponent(url)]};for(service in urls){if(!jQuery('a[data-shared=sharing-'+service+'-'+id+']').length){continue;}
while((service_url=urls[service].pop())){jQuery.getScript(service_url);}}
WPCOMSharing.done_urls[id]=true;},get_permalink:function(url){if('https:'==window.location.protocol){return url.replace(/^http:\/\//i,'https://');}else{return url.replace(/^https:\/\//i,'http://');}},update_facebook_count:function(data){var shareCount=0;if('undefined'!=typeof data&&'undefined'!=typeof Object.keys(data)&&Object.keys(data).length>0){if('undefined'!=typeof data[Object.keys(data)[0]].shares){shareCount+=data[Object.keys(data)[0]].shares;}
if('undefined'!=typeof data[Object.keys(data)[1]].shares){shareCount+=data[Object.keys(data)[1]].shares;}
if(shareCount>0){WPCOMSharing.inject_share_count('sharing-facebook-'+WPCOM_sharing_counts[WPCOMSharing.get_permalink(Object.keys(data)[0])],shareCount);}}},update_twitter_count:function(data){if('number'===typeof data.count){var permalink=WPCOMSharing.get_permalink(data.url);if(!WPCOMSharing.twitter_count[permalink]){WPCOMSharing.twitter_count[permalink]=0;}
WPCOMSharing.twitter_count[permalink]+=data.count;if(WPCOMSharing.twitter_count[permalink]>0){WPCOMSharing.inject_share_count('sharing-twitter-'+WPCOM_sharing_counts[permalink],WPCOMSharing.twitter_count[permalink]);}}},update_linkedin_count:function(data){if('undefined'!=typeof data.count&&(data.count*1)>0){WPCOMSharing.inject_share_count('sharing-linkedin-'+WPCOM_sharing_counts[data.url],data.count);}},update_pinterest_count:function(data){if('undefined'!=typeof data.count&&(data.count*1)>0){WPCOMSharing.inject_share_count('sharing-pinterest-'+WPCOM_sharing_counts[data.url],data.count);}},inject_share_count:function(id,count){var $share=jQuery('a[data-shared='+id+'] > span');$share.find('.share-count').remove();$share.append('<span class="share-count">'+WPCOMSharing.format_count(count)+'</span>');},format_count:function(count){if(count<1000)
return count;if(count>=1000&&count<10000)
return String(count).substring(0,1)+'K+';return'10K+';}};}
(function($){var $body,$sharing_email;$.fn.extend({share_is_email:function(value){return /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(this.val());}});$body=$(document.body).on('post-load',WPCOMSharing_do);$(document).on('ready',function(){$sharing_email=$('#sharing_email');$body.append($sharing_email);WPCOMSharing_do();});function WPCOMSharing_do(){if('undefined'!=typeof WPCOM_sharing_counts){for(var url in WPCOM_sharing_counts){WPCOMSharing.get_counts(url);}}
var $more_sharing_buttons=$('.sharedaddy a.sharing-anchor');$more_sharing_buttons.click(function(){return false;});$('.sharedaddy a').each(function(){if($(this).attr('href')&&$(this).attr('href').indexOf('share=')!=-1)
$(this).attr('href',$(this).attr('href')+'&nb=1');});$more_sharing_buttons.on('click',function(){var $more_sharing_button=$(this),$more_sharing_pane=$more_sharing_button.parents('div:first').find('.inner');if($more_sharing_pane.is(':animated')){return;}
if(true===$more_sharing_pane.data('justSlid')){return;}
$sharing_email.slideUp(200);$more_sharing_pane.css({left:$more_sharing_button.position().left+'px',top:$more_sharing_button.position().top+$more_sharing_button.height()+3+'px'}).slideToggle(200);});if(document.ontouchstart===undefined){$more_sharing_buttons.hover(function(){var $more_sharing_button=$(this),$more_sharing_pane=$more_sharing_button.parents('div:first').find('.inner');if(!$more_sharing_pane.is(':animated')){var timer=setTimeout(function(){$sharing_email.slideUp(200);$more_sharing_pane.data('justSlid',true);$more_sharing_pane.css({left:$more_sharing_button.position().left+'px',top:$more_sharing_button.position().top+$more_sharing_button.height()+3+'px'}).slideDown(200,function(){$more_sharing_button.data('hasoriginal',true).data('hasitem',false);setTimeout(function(){$more_sharing_pane.data('justSlid',false);},300);if($more_sharing_pane.find('.share-google-plus-1').size()){return;}
$more_sharing_pane.mouseleave(handler_item_leave).mouseenter(handler_item_enter);$more_sharing_button.mouseleave(handler_original_leave).mouseenter(handler_original_enter);});var handler_item_leave=function(){$more_sharing_button.data('hasitem',false);if($more_sharing_button.data('hasoriginal')===false){var timer=setTimeout(close_it,800);$more_sharing_button.data('timer2',timer);}};var handler_item_enter=function(){$more_sharing_button.data('hasitem',true);clearTimeout($more_sharing_button.data('timer2'));}
var handler_original_leave=function(){$more_sharing_button.data('hasoriginal',false);if($more_sharing_button.data('hasitem')===false){var timer=setTimeout(close_it,800);$more_sharing_button.data('timer2',timer);}};var handler_original_enter=function(){$more_sharing_button.data('hasoriginal',true);clearTimeout($more_sharing_button.data('timer2'));};var close_it=function(){$more_sharing_pane.data('justSlid',true);$more_sharing_pane.slideUp(200,function(){setTimeout(function(){$more_sharing_pane.data('justSlid',false);},300);});$more_sharing_button.unbind('mouseleave',handler_original_leave).unbind('mouseenter',handler_original_enter);$more_sharing_pane.unbind('mouseleave',handler_item_leave).unbind('mouseenter',handler_item_leave);return false;};},200);$more_sharing_button.data('timer',timer);}},function(){$more_sharing_buttons.each(function(){clearTimeout($(this).data('timer'));});$more_sharing_buttons.data('timer',false);});}
$(document).click(function(){$more_sharing_buttons.each(function(){clearTimeout($(this).data('timer'));});$more_sharing_buttons.data('timer',false);$('.sharedaddy .inner').slideUp();});$('.sharedaddy ul').each(function(item){if('yep'==$(this).data('has-click-events'))
return;$(this).data('has-click-events','yep');printUrl=function(uniqueId,urlToPrint){$('body:first').append('<iframe style="position:fixed;top:100;left:100;height:1px;width:1px;border:none;" id="printFrame-'+uniqueId+'" name="printFrame-'+uniqueId+'" src="'+urlToPrint+'" onload="frames[\'printFrame-'+uniqueId+'\'].focus();frames[\'printFrame-'+uniqueId+'\'].print();"></iframe>')};$(this).find('a.share-print').click(function(){ref=$(this).attr('href');var do_print=function(){if(ref.indexOf('#print')==-1){uid=new Date().getTime();printUrl(uid,ref);}
else
print();}
if($(this).parents('.sharing-hidden').length>0){$(this).parents('.inner').slideUp(0,function(){do_print();});}
else
do_print();return false;});$(this).find('a.share-press-this').click(function(){var s='';if(window.getSelection)
s=window.getSelection();else if(document.getSelection)
s=document.getSelection();else if(document.selection)
s=document.selection.createRange().text;if(s)
$(this).attr('href',$(this).attr('href')+'&sel='+encodeURI(s));if(!window.open($(this).attr('href'),'t','toolbar=0,resizable=1,scrollbars=1,status=1,width=720,height=570'))
document.location.href=$(this).attr('href');return false;});$('a.share-email',this).on('click',function(){var url=$(this).attr('href'),key;if($sharing_email.is(':visible')){$sharing_email.slideUp(200);}else{$('.sharedaddy .inner').slideUp();$('#sharing_email .response').remove();$('#sharing_email form').show();$('#sharing_email form input[type=submit]').removeAttr('disabled');$('#sharing_email form a.sharing_cancel').show();key='';if($('#recaptcha_public_key').length>0)
key=$('#recaptcha_public_key').val();Recaptcha.create(key,'sharing_recaptcha',{lang:sharing_js_options.lang});$sharing_email.css({left:$(this).offset().left+'px',top:$(this).offset().top+$(this).height()+'px'}).slideDown(200);$('#sharing_email a.sharing_cancel').unbind('click').click(function(){$('#sharing_email .errors').hide();$sharing_email.slideUp(200);$('#sharing_background').fadeOut();return false;});$('#sharing_email input[type=submit]').unbind('click').click(function(){var form=$(this).parents('form');$(this).prop('disabled',true);form.find('a.sharing_cancel').hide();form.find('img.loading').show();$('#sharing_email .errors').hide();$('#sharing_email .error').removeClass('error');if($('#sharing_email input[name=source_email]').share_is_email()==false)
$('#sharing_email input[name=source_email]').addClass('error');if($('#sharing_email input[name=target_email]').share_is_email()==false)
$('#sharing_email input[name=target_email]').addClass('error');if($('#sharing_email .error').length==0){$.ajax({url:url,type:'POST',data:form.serialize(),success:function(response){form.find('img.loading').hide();if(response=='1'||response=='2'||response=='3'){$('#sharing_email .errors-'+response).show();form.find('input[type=submit]').removeAttr('disabled');form.find('a.sharing_cancel').show();Recaptcha.reload();}
else{$('#sharing_email form').hide();$sharing_email.append(response);$('#sharing_email a.sharing_cancel').click(function(){$sharing_email.slideUp(200);$('#sharing_background').fadeOut();return false;});}}});return false;}
form.find('img.loading').hide();form.find('input[type=submit]').removeAttr('disabled');form.find('a.sharing_cancel').show();$('#sharing_email .errors-1').show();return false;});}
return false;});});$('li.share-email, li.share-custom a.sharing-anchor').addClass('share-service-visible');}})(jQuery);var RecaptchaTemplates={};RecaptchaTemplates.VertHtml='<table id="recaptcha_table" class="recaptchatable" > <tr> <td colspan="6" class=\'recaptcha_r1_c1\'></td> </tr> <tr> <td class=\'recaptcha_r2_c1\'></td> <td colspan="4" class=\'recaptcha_image_cell\'><div id="recaptcha_image"></div></td> <td class=\'recaptcha_r2_c2\'></td> </tr> <tr> <td rowspan="6" class=\'recaptcha_r3_c1\'></td> <td colspan="4" class=\'recaptcha_r3_c2\'></td> <td rowspan="6" class=\'recaptcha_r3_c3\'></td> </tr> <tr> <td rowspan="3" class=\'recaptcha_r4_c1\' height="49"> <div class="recaptcha_input_area"> <label for="recaptcha_response_field" class="recaptcha_input_area_text"><span id="recaptcha_instructions_image" class="recaptcha_only_if_image recaptcha_only_if_no_incorrect_sol"></span><span id="recaptcha_instructions_audio" class="recaptcha_only_if_no_incorrect_sol recaptcha_only_if_audio"></span><span id="recaptcha_instructions_error" class="recaptcha_only_if_incorrect_sol"></span></label><br/> <input name="recaptcha_response_field" id="recaptcha_response_field" type="text" /> </div> </td> <td rowspan="4" class=\'recaptcha_r4_c2\'></td> <td><a id=\'recaptcha_reload_btn\'><img id=\'recaptcha_reload\' width="25" height="17" /></a></td> <td rowspan="4" class=\'recaptcha_r4_c4\'></td> </tr> <tr> <td><a id=\'recaptcha_switch_audio_btn\' class="recaptcha_only_if_image"><img id=\'recaptcha_switch_audio\' width="25" height="16" alt="" /></a><a id=\'recaptcha_switch_img_btn\' class="recaptcha_only_if_audio"><img id=\'recaptcha_switch_img\' width="25" height="16" alt=""/></a></td> </tr> <tr> <td><a id=\'recaptcha_whatsthis_btn\'><img id=\'recaptcha_whatsthis\' width="25" height="16" /></a></td> </tr> <tr> <td class=\'recaptcha_r7_c1\'></td> <td class=\'recaptcha_r8_c1\'></td> </tr> </table> ';RecaptchaTemplates.CleanCss=".recaptchatable td img{display:block}.recaptchatable .recaptcha_image_cell center img{height:57px}.recaptchatable .recaptcha_image_cell center{height:57px}.recaptchatable .recaptcha_image_cell{background-color:white;height:57px;padding:7px!important}.recaptchatable,#recaptcha_area tr,#recaptcha_area td,#recaptcha_area th{margin:0!important;border:0!important;border-collapse:collapse!important;vertical-align:middle!important}.recaptchatable *{margin:0;padding:0;border:0;color:black;position:static;top:auto;left:auto;right:auto;bottom:auto;text-align:left!important}.recaptchatable #recaptcha_image{margin:auto;border:1px solid #dfdfdf!important}.recaptchatable a img{border:0}.recaptchatable a,.recaptchatable a:hover{-moz-outline:none;border:0!important;padding:0!important;text-decoration:none;color:blue;background:none!important;font-weight:normal}.recaptcha_input_area{position:relative!important;background:none!important}.recaptchatable label.recaptcha_input_area_text{border:1px solid #dfdfdf!important;margin:0!important;padding:0!important;position:static!important;top:auto!important;left:auto!important;right:auto!important;bottom:auto!important}.recaptcha_theme_red label.recaptcha_input_area_text,.recaptcha_theme_white label.recaptcha_input_area_text{color:black!important}.recaptcha_theme_blackglass label.recaptcha_input_area_text{color:white!important}.recaptchatable #recaptcha_response_field{font-size:11pt}.recaptcha_theme_blackglass #recaptcha_response_field,.recaptcha_theme_white #recaptcha_response_field{border:1px solid gray}.recaptcha_theme_red #recaptcha_response_field{border:1px solid #cca940}.recaptcha_audio_cant_hear_link{font-size:7pt;color:black}.recaptchatable{line-height:1em;border:1px solid #dfdfdf!important}.recaptcha_error_text{color:red}";RecaptchaTemplates.CleanHtml='<table id="recaptcha_table" class="recaptchatable"> <tr height="73"> <td class=\'recaptcha_image_cell\' width="302"><center><div id="recaptcha_image"></div></center></td> <td style="padding: 10px 7px 7px 7px;"> <a id=\'recaptcha_reload_btn\'><img id=\'recaptcha_reload\' width="25" height="18" alt="" /></a> <a id=\'recaptcha_switch_audio_btn\' class="recaptcha_only_if_image"><img id=\'recaptcha_switch_audio\' width="25" height="15" alt="" /></a><a id=\'recaptcha_switch_img_btn\' class="recaptcha_only_if_audio"><img id=\'recaptcha_switch_img\' width="25" height="15" alt=""/></a> <a id=\'recaptcha_whatsthis_btn\'><img id=\'recaptcha_whatsthis\' width="25" height="16" /></a> </td> <td style="padding: 18px 7px 18px 7px;"> <img id=\'recaptcha_logo\' alt="" width="71" height="36" /> </td> </tr> <tr> <td style="padding-left: 7px;"> <div class="recaptcha_input_area" style="padding-top: 2px; padding-bottom: 7px;"> <input style="border: 1px solid #3c3c3c; width: 302px;" name="recaptcha_response_field" id="recaptcha_response_field" type="text" /> </div> </td> <td></td> <td style="padding: 4px 7px 12px 7px;"> <img id="recaptcha_tagline" width="71" height="17" /> </td> </tr> </table> ';RecaptchaTemplates.ContextHtml='<table id="recaptcha_table" class="recaptchatable"> <tr> <td colspan="6" class=\'recaptcha_r1_c1\'></td> </tr> <tr> <td class=\'recaptcha_r2_c1\'></td> <td colspan="4" class=\'recaptcha_image_cell\'><div id="recaptcha_image"></div></td> <td class=\'recaptcha_r2_c2\'></td> </tr> <tr> <td rowspan="6" class=\'recaptcha_r3_c1\'></td> <td colspan="4" class=\'recaptcha_r3_c2\'></td> <td rowspan="6" class=\'recaptcha_r3_c3\'></td> </tr> <tr> <td rowspan="3" class=\'recaptcha_r4_c1\' height="49"> <div class="recaptcha_input_area"> <label for="recaptcha_response_field" class="recaptcha_input_area_text"><span id="recaptcha_instructions_context" class="recaptcha_only_if_image recaptcha_only_if_no_incorrect_sol"></span><span id="recaptcha_instructions_audio" class="recaptcha_only_if_no_incorrect_sol recaptcha_only_if_audio"></span><span id="recaptcha_instructions_error" class="recaptcha_only_if_incorrect_sol"></span></label><br/> <input name="recaptcha_response_field" id="recaptcha_response_field" type="text" /> </div> </td> <td rowspan="4" class=\'recaptcha_r4_c2\'></td> <td><a id=\'recaptcha_reload_btn\'><img id=\'recaptcha_reload\' width="25" height="17" /></a></td> <td rowspan="4" class=\'recaptcha_r4_c4\'></td> </tr> <tr> <td><a id=\'recaptcha_switch_audio_btn\' class="recaptcha_only_if_image"><img id=\'recaptcha_switch_audio\' width="25" height="16" alt="" /></a><a id=\'recaptcha_switch_img_btn\' class="recaptcha_only_if_audio"><img id=\'recaptcha_switch_img\' width="25" height="16" alt=""/></a></td> </tr> <tr> <td><a id=\'recaptcha_whatsthis_btn\'><img id=\'recaptcha_whatsthis\' width="25" height="16" /></a></td> </tr> <tr> <td class=\'recaptcha_r7_c1\'></td> <td class=\'recaptcha_r8_c1\'></td> </tr> </table> ';RecaptchaTemplates.VertCss=".recaptchatable td img{display:block}.recaptchatable .recaptcha_r1_c1{background:url(IMGROOT/sprite.png) 0 -63px no-repeat;width:318px;height:9px}.recaptchatable .recaptcha_r2_c1{background:url(IMGROOT/sprite.png) -18px 0 no-repeat;width:9px;height:57px}.recaptchatable .recaptcha_r2_c2{background:url(IMGROOT/sprite.png) -27px 0 no-repeat;width:9px;height:57px}.recaptchatable .recaptcha_r3_c1{background:url(IMGROOT/sprite.png) 0 0 no-repeat;width:9px;height:63px}.recaptchatable .recaptcha_r3_c2{background:url(IMGROOT/sprite.png) -18px -57px no-repeat;width:300px;height:6px}.recaptchatable .recaptcha_r3_c3{background:url(IMGROOT/sprite.png) -9px 0 no-repeat;width:9px;height:63px}.recaptchatable .recaptcha_r4_c1{background:url(IMGROOT/sprite.png) -43px 0 no-repeat;width:171px;height:49px}.recaptchatable .recaptcha_r4_c2{background:url(IMGROOT/sprite.png) -36px 0 no-repeat;width:7px;height:57px}.recaptchatable .recaptcha_r4_c4{background:url(IMGROOT/sprite.png) -214px 0 no-repeat;width:97px;height:57px}.recaptchatable .recaptcha_r7_c1{background:url(IMGROOT/sprite.png) -43px -49px no-repeat;width:171px;height:8px}.recaptchatable .recaptcha_r8_c1{background:url(IMGROOT/sprite.png) -43px -49px no-repeat;width:25px;height:8px}.recaptchatable .recaptcha_image_cell center img{height:57px}.recaptchatable .recaptcha_image_cell center{height:57px}.recaptchatable .recaptcha_image_cell{background-color:white;height:57px}#recaptcha_area,#recaptcha_table{width:318px!important}.recaptchatable,#recaptcha_area tr,#recaptcha_area td,#recaptcha_area th{margin:0!important;border:0!important;padding:0!important;border-collapse:collapse!important;vertical-align:middle!important}.recaptchatable *{margin:0;padding:0;border:0;font-family:helvetica,sans-serif;font-size:8pt;color:black;position:static;top:auto;left:auto;right:auto;bottom:auto;text-align:left!important}.recaptchatable #recaptcha_image{margin:auto}.recaptchatable img{border:0!important;margin:0!important;padding:0!important}.recaptchatable a,.recaptchatable a:hover{-moz-outline:none;border:0!important;padding:0!important;text-decoration:none;color:blue;background:none!important;font-weight:normal}.recaptcha_input_area{position:relative!important;width:146px!important;height:45px!important;margin-left:20px!important;margin-right:5px!important;margin-top:4px!important;background:none!important}.recaptchatable label.recaptcha_input_area_text{margin:0!important;padding:0!important;position:static!important;top:auto!important;left:auto!important;right:auto!important;bottom:auto!important;background:none!important;height:auto!important;width:auto!important}.recaptcha_theme_red label.recaptcha_input_area_text,.recaptcha_theme_white label.recaptcha_input_area_text{color:black!important}.recaptcha_theme_blackglass label.recaptcha_input_area_text{color:white!important}.recaptchatable #recaptcha_response_field{width:145px!important;position:absolute!important;bottom:7px!important;padding:0!important;margin:0!important;font-size:10pt}.recaptcha_theme_blackglass #recaptcha_response_field,.recaptcha_theme_white #recaptcha_response_field{border:1px solid gray}.recaptcha_theme_red #recaptcha_response_field{border:1px solid #cca940}.recaptcha_audio_cant_hear_link{font-size:7pt;color:black}.recaptchatable{line-height:1em}#recaptcha_instructions_error{color:red!important}";var RecaptchaStr_en={visual_challenge:"Get a visual challenge",audio_challenge:"Get an audio challenge",refresh_btn:"Get a new challenge",instructions_visual:"Type the two words:",instructions_context:"Type the words in the boxes:",instructions_audio:"Type what you hear:",help_btn:"Help",play_again:"Play sound again",cant_hear_this:"Download sound as MP3",incorrect_try_again:"Incorrect. Try again."},RecaptchaStr_de={visual_challenge:"Visuelle Aufgabe generieren",audio_challenge:"Audio-Aufgabe generieren",refresh_btn:"Neue Aufgabe generieren",instructions_visual:"Gib die 2 W\u00f6rter ein:",instructions_context:"",instructions_audio:"Gib die 8 Ziffern ein:",help_btn:"Hilfe",incorrect_try_again:"Falsch. Nochmals versuchen!"},RecaptchaStr_es={visual_challenge:"Obt\u00e9n un reto visual",audio_challenge:"Obt\u00e9n un reto audible",refresh_btn:"Obt\u00e9n un nuevo reto",instructions_visual:"Escribe las 2 palabras:",instructions_context:"",instructions_audio:"Escribe los 8 n\u00fameros:",help_btn:"Ayuda",incorrect_try_again:"Incorrecto. Otro intento."},RecaptchaStr_fr={visual_challenge:"D\u00e9fi visuel",audio_challenge:"D\u00e9fi audio",refresh_btn:"Nouveau d\u00e9fi",instructions_visual:"Entrez les deux mots:",instructions_context:"",instructions_audio:"Entrez les huit chiffres:",help_btn:"Aide",incorrect_try_again:"Incorrect."},RecaptchaStr_nl={visual_challenge:"Test me via een afbeelding",audio_challenge:"Test me via een geluidsfragment",refresh_btn:"Nieuwe uitdaging",instructions_visual:"Type de twee woorden:",instructions_context:"",instructions_audio:"Type de acht cijfers:",help_btn:"Help",incorrect_try_again:"Foute invoer."},RecaptchaStr_pt={visual_challenge:"Obter um desafio visual",audio_challenge:"Obter um desafio sonoro",refresh_btn:"Obter um novo desafio",instructions_visual:"Escreva as 2 palavras:",instructions_context:"",instructions_audio:"Escreva os 8 numeros:",help_btn:"Ajuda",incorrect_try_again:"Incorrecto. Tenta outra vez."},RecaptchaStr_ru={visual_challenge:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443",audio_challenge:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0437\u0432\u0443\u043a\u043e\u0432\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443",refresh_btn:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443",instructions_visual:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0432\u0430 \u0441\u043b\u043e\u0432\u0430:",instructions_context:"",instructions_audio:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u043e\u0441\u0435\u043c\u044c \u0447\u0438\u0441\u0435\u043b:",help_btn:"\u041f\u043e\u043c\u043e\u0449\u044c",incorrect_try_again:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e."},RecaptchaStr_tr={visual_challenge:"G\u00f6rsel deneme",audio_challenge:"\u0130\u015fitsel deneme",refresh_btn:"Yeni deneme",instructions_visual:"\u0130ki kelimeyi yaz\u0131n:",instructions_context:"",instructions_audio:"Sekiz numaray\u0131 yaz\u0131n:",help_btn:"Yard\u0131m (\u0130ngilizce)",incorrect_try_again:"Yanl\u0131\u015f. Bir daha deneyin."},RecaptchaStr_it={visual_challenge:"Modalit\u00e0 visiva",audio_challenge:"Modalit\u00e0 auditiva",refresh_btn:"Chiedi due nuove parole",instructions_visual:"Scrivi le due parole:",instructions_context:"",instructions_audio:"Trascrivi ci\u00f2 che senti:",help_btn:"Aiuto",incorrect_try_again:"Scorretto. Riprova."},RecaptchaLangMap={en:RecaptchaStr_en,de:RecaptchaStr_de,es:RecaptchaStr_es,fr:RecaptchaStr_fr,nl:RecaptchaStr_nl,pt:RecaptchaStr_pt,ru:RecaptchaStr_ru,tr:RecaptchaStr_tr,it:RecaptchaStr_it};var RecaptchaStr=RecaptchaStr_en,RecaptchaOptions,RecaptchaDefaultOptions={tabindex:0,theme:"red",callback:null,lang:"en",custom_theme_widget:null,custom_translations:null,includeContext:false},Recaptcha={widget:null,timer_id:-1,style_set:false,theme:null,type:"image",ajax_verify_cb:null,$:function(a){return typeof a=="string"?document.getElementById(a):a},create:function(a,b,c){Recaptcha.destroy();if(b)Recaptcha.widget=Recaptcha.$(b);Recaptcha._init_options(c);Recaptcha._call_challenge(a)},destroy:function(){var a=Recaptcha.$("recaptcha_challenge_field");a&&a.parentNode.removeChild(a);Recaptcha.timer_id!=-1&&clearInterval(Recaptcha.timer_id);Recaptcha.timer_id=-1;if(a=Recaptcha.$("recaptcha_image"))a.innerHTML="";if(Recaptcha.widget){if(Recaptcha.theme!="custom")Recaptcha.widget.innerHTML="";else Recaptcha.widget.style.display="none";Recaptcha.widget=null}},focus_response_field:function(){var a=Recaptcha.$;a=a("recaptcha_response_field");a.focus()},get_challenge:function(){if(typeof RecaptchaState=="undefined")return null;return RecaptchaState.challenge},get_response:function(){var a=Recaptcha.$;a=a("recaptcha_response_field");if(!a)return null;return a.value},ajax_verify:function(a){Recaptcha.ajax_verify_cb=a;a=Recaptcha._get_api_server()+"/ajaxverify?c="+encodeURIComponent(Recaptcha.get_challenge())+"&response="+encodeURIComponent(Recaptcha.get_response());Recaptcha._add_script(a)},_ajax_verify_callback:function(a){Recaptcha.ajax_verify_cb(a)},_get_api_server:function(){var a=window.location.protocol,b;b=typeof _RecaptchaOverrideApiServer!="undefined"?_RecaptchaOverrideApiServer:"www.google.com/recaptcha/api";return a+"//"+b},_call_challenge:function(a){a=Recaptcha._get_api_server()+"/challenge?k="+a+"&ajax=1&cachestop="+Math.random();if(typeof RecaptchaOptions.extra_challenge_params!="undefined")a+="&"+RecaptchaOptions.extra_challenge_params;if(RecaptchaOptions.includeContext)a+="&includeContext=1";Recaptcha._add_script(a)},_add_script:function(a){var b=document.createElement("script");b.type="text/javascript";b.src=a;Recaptcha._get_script_area().appendChild(b)},_get_script_area:function(){var a=document.getElementsByTagName("head");return a=!a||a.length<1?document.body:a[0]},_hash_merge:function(a){var b={};for(var c in a)for(var d in a[c])b[d]=a[c][d];if(b.theme=="context")b.includeContext=true;return b},_init_options:function(a){RecaptchaOptions=Recaptcha._hash_merge([RecaptchaDefaultOptions,a||{}])},challenge_callback:function(){Recaptcha._reset_timer();RecaptchaStr=Recaptcha._hash_merge([RecaptchaStr_en,RecaptchaLangMap[RecaptchaOptions.lang]||{},RecaptchaOptions.custom_translations||{}]);window.addEventListener&&window.addEventListener("unload",function(){Recaptcha.destroy()},false);Recaptcha._is_ie()&&window.attachEvent&&window.attachEvent("onbeforeunload",function(){});if(navigator.userAgent.indexOf("KHTML")>0){var a=document.createElement("iframe");a.src="about:blank";a.style.height="0px";a.style.width="0px";a.style.visibility="hidden";a.style.border="none";var b=document.createTextNode("This frame prevents back/forward cache problems in Safari.");a.appendChild(b);document.body.appendChild(a)}Recaptcha._finish_widget()},_add_css:function(a){var b=document.createElement("style");b.type="text/css";if(b.styleSheet)if(navigator.appVersion.indexOf("MSIE 5")!=-1)document.write("<style type='text/css'>"+a+"</style>");else b.styleSheet.cssText=a;else if(navigator.appVersion.indexOf("MSIE 5")!=-1)document.write("<style type='text/css'>"+a+"</style>");else{a=document.createTextNode(a);b.appendChild(a)}Recaptcha._get_script_area().appendChild(b)},_set_style:function(a){if(!Recaptcha.style_set){Recaptcha.style_set=true;Recaptcha._add_css(a+"\n\n.recaptcha_is_showing_audio .recaptcha_only_if_image,.recaptcha_isnot_showing_audio .recaptcha_only_if_audio,.recaptcha_had_incorrect_sol .recaptcha_only_if_no_incorrect_sol,.recaptcha_nothad_incorrect_sol .recaptcha_only_if_incorrect_sol{display:none !important}")}},_init_builtin_theme:function(){var a=Recaptcha.$,b=RecaptchaStr,c=RecaptchaState,d,e;c=c.server;if(c[c.length-1]=="/")c=c.substring(0,c.length-1);var f=c+"/img/"+Recaptcha.theme;if(Recaptcha.theme=="clean"){c=RecaptchaTemplates.CleanCss;d=RecaptchaTemplates.CleanHtml;e="png"}else{if(Recaptcha.theme=="context"){c=RecaptchaTemplates.VertCss;d=RecaptchaTemplates.ContextHtml}else{c=RecaptchaTemplates.VertCss;d=RecaptchaTemplates.VertHtml}e="gif"}c=c.replace(/IMGROOT/g,f);Recaptcha._set_style(c);Recaptcha.widget.innerHTML="<div id='recaptcha_area'>"+d+"</div>";a("recaptcha_reload").src=f+"/refresh."+e;a("recaptcha_switch_audio").src=f+"/audio."+e;a("recaptcha_switch_img").src=f+"/text."+e;a("recaptcha_whatsthis").src=f+"/help."+e;if(Recaptcha.theme=="clean"){a("recaptcha_logo").src=f+"/logo."+e;a("recaptcha_tagline").src=f+"/tagline."+e}a("recaptcha_reload").alt=b.refresh_btn;a("recaptcha_switch_audio").alt=b.audio_challenge;a("recaptcha_switch_img").alt=b.visual_challenge;a("recaptcha_whatsthis").alt=b.help_btn;a("recaptcha_reload_btn").href="javascript:Recaptcha.reload ();";a("recaptcha_reload_btn").title=b.refresh_btn;a("recaptcha_switch_audio_btn").href="javascript:Recaptcha.switch_type('audio');";a("recaptcha_switch_audio_btn").title=b.audio_challenge;a("recaptcha_switch_img_btn").href="javascript:Recaptcha.switch_type('image');";a("recaptcha_switch_img_btn").title=b.visual_challenge;a("recaptcha_whatsthis_btn").href=Recaptcha._get_help_link();a("recaptcha_whatsthis_btn").target="_blank";a("recaptcha_whatsthis_btn").title=b.help_btn;a("recaptcha_whatsthis_btn").onclick=function(){Recaptcha.showhelp();return false};a("recaptcha_table").className="recaptchatable recaptcha_theme_"+Recaptcha.theme;a("recaptcha_instructions_image")&&a("recaptcha_instructions_image").appendChild(document.createTextNode(b.instructions_visual));a("recaptcha_instructions_context")&&a("recaptcha_instructions_context").appendChild(document.createTextNode(b.instructions_context));a("recaptcha_instructions_audio")&&a("recaptcha_instructions_audio").appendChild(document.createTextNode(b.instructions_audio));a("recaptcha_instructions_error")&&a("recaptcha_instructions_error").appendChild(document.createTextNode(b.incorrect_try_again))},_finish_widget:function(){var a=Recaptcha.$,b=RecaptchaState,c=RecaptchaOptions,d=c.theme;switch(d){case"red":case"white":case"blackglass":case"clean":case"custom":case"context":break;default:d="red";break}if(!Recaptcha.theme)Recaptcha.theme=d;Recaptcha.theme!="custom"?Recaptcha._init_builtin_theme():Recaptcha._set_style("");d=document.createElement("span");d.id="recaptcha_challenge_field_holder";d.style.display="none";a("recaptcha_response_field").parentNode.insertBefore(d,a("recaptcha_response_field"));a("recaptcha_response_field").setAttribute("autocomplete","off");a("recaptcha_image").style.width="300px";a("recaptcha_image").style.height="57px";Recaptcha.should_focus=false;Recaptcha._set_challenge(b.challenge,"image");if(c.tabindex){a("recaptcha_response_field").tabIndex=c.tabindex;if(Recaptcha.theme!="custom"){a("recaptcha_whatsthis_btn").tabIndex=c.tabindex;a("recaptcha_switch_img_btn").tabIndex=c.tabindex;a("recaptcha_switch_audio_btn").tabIndex=c.tabindex;a("recaptcha_reload_btn").tabIndex=c.tabindex}}if(Recaptcha.widget)Recaptcha.widget.style.display="";c.callback&&c.callback()},switch_type:function(a){var b=Recaptcha;b.type=a;b.reload(b.type=="audio"?"a":"v")},reload:function(a){var b=Recaptcha,c=RecaptchaState;if(typeof a=="undefined")a="r";c=c.server+"reload?c="+c.challenge+"&k="+c.site+"&reason="+a+"&type="+b.type+"&lang="+RecaptchaOptions.lang;if(RecaptchaOptions.includeContext)c+="&includeContext=1";if(typeof RecaptchaOptions.extra_challenge_params!="undefined")c+="&"+RecaptchaOptions.extra_challenge_params;if(b.type=="audio")c+=RecaptchaOptions.audio_beta_12_08?"&audio_beta_12_08=1":"&new_audio_default=1";b.should_focus=a!="t";b._add_script(c)},finish_reload:function(a,b){RecaptchaState.is_incorrect=false;Recaptcha._set_challenge(a,b)},_set_challenge:function(a,b){var c=Recaptcha,d=RecaptchaState,e=c.$;d.challenge=a;c.type=b;e("recaptcha_challenge_field_holder").innerHTML="<input type='hidden' name='recaptcha_challenge_field' id='recaptcha_challenge_field' value='"+d.challenge+"'/>";if(b=="audio")e("recaptcha_image").innerHTML=Recaptcha.getAudioCaptchaHtml();else if(b=="image"){var f=d.server+"image?c="+d.challenge;e("recaptcha_image").innerHTML="<img style='display:block;' height='57' width='300' src='"+
f+"'/>"}Recaptcha._css_toggle("recaptcha_had_incorrect_sol","recaptcha_nothad_incorrect_sol",d.is_incorrect);Recaptcha._css_toggle("recaptcha_is_showing_audio","recaptcha_isnot_showing_audio",b=="audio");c._clear_input();c.should_focus&&c.focus_response_field();c._reset_timer()},_reset_timer:function(){var a=RecaptchaState;clearInterval(Recaptcha.timer_id);Recaptcha.timer_id=setInterval("Recaptcha.reload('t');",(a.timeout-300)*1E3)},showhelp:function(){window.open(Recaptcha._get_help_link(),"recaptcha_popup","width=460,height=570,location=no,menubar=no,status=no,toolbar=no,scrollbars=yes,resizable=yes")},_clear_input:function(){var a=Recaptcha.$("recaptcha_response_field");a.value=""},_displayerror:function(a){var b=Recaptcha.$;b("recaptcha_image").innerHTML="";b("recaptcha_image").appendChild(document.createTextNode(a))},reloaderror:function(a){Recaptcha._displayerror(a)},_is_ie:function(){return navigator.userAgent.indexOf("MSIE")>0&&!window.opera},_css_toggle:function(a,b,c){var d=Recaptcha.widget;if(!d)d=document.body;var e=d.className;e=e.replace(RegExp("(^|\\s+)"+a+"(\\s+|$)")," ");e=e.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," ");e+=" "+(c?a:b);d.className=e},_get_help_link:function(){var a=RecaptchaOptions.lang;return"http://recaptcha.net/popuphelp/"+(a=="en"?"":a+".html")},playAgain:function(){var a=Recaptcha.$;a("recaptcha_image").innerHTML=Recaptcha.getAudioCaptchaHtml()},getAudioCaptchaHtml:function(){var a=Recaptcha,b=RecaptchaState,c=b.server+"image?c="+b.challenge;if(c.indexOf("https://")==0)c="http://"+c.substring(8);b=b.server+"/img/audiocaptcha.swf?v2";a=a._is_ie()?'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="audiocaptcha" width="0" height="0" codebase="https://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"><param name="movie" value="'+b+'" /><param name="quality" value="high" /><param name="bgcolor" value="#869ca7" /><param name="allowScriptAccess" value="always" /></object><br/>':'<embed src="'+b+'" quality="high" bgcolor="#869ca7" width="0" height="0" name="audiocaptcha" align="middle" play="true" loop="false" quality="high" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer"></embed> ';c=(Recaptcha.checkFlashVer()?'<br/><a class="recaptcha_audio_cant_hear_link" href="#" onclick="Recaptcha.playAgain(); return false;">'+RecaptchaStr.play_again+"</a>":"")+'<br/><a class="recaptcha_audio_cant_hear_link" target="_blank" href="'+c+'">'+RecaptchaStr.cant_hear_this+"</a>";return a+c},gethttpwavurl:function(){var a=RecaptchaState;if(Recaptcha.type=="audio"){a=a.server+"image?c="+a.challenge;if(a.indexOf("https://")==0)a="http://"+a.substring(8);return a}return""},checkFlashVer:function(){var a=navigator.appVersion.indexOf("MSIE")!=-1?true:false,b=navigator.appVersion.toLowerCase().indexOf("win")!=-1?true:false,c=navigator.userAgent.indexOf("Opera")!=-1?true:false,d=-1;if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){a=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";a=navigator.plugins["Shockwave Flash"+a].description;a=a.split(" ");a=a[2].split(".");d=a[0]}}else if(a&&b&&!c)try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),f=e.GetVariable("$version");d=f.split(" ")[1].split(",")[0]}catch(g){}return d>=9},getlang:function(){return RecaptchaOptions.lang}};